(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{190:function(e,a,n){"use strict";n.r(a),n.d(a,"default",function(){return m}),n.d(a,"_frontmatter",function(){return p});n(10),n(8),n(1),n(20),n(21);var t=n(0),s=n.n(t),o=n(194),c=n(198),l=n(201);n(200);var r={},m=function(e){var a,n;function t(a){var n;return(n=e.call(this,a)||this).layout=c.a,n}return n=e,(a=t).prototype=Object.create(n.prototype),a.prototype.constructor=a,a.__proto__=n,t.prototype.render=function(){var e=this.props,a=e.components,n=function(e,a){if(null==e)return{};var n,t,s={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],a.indexOf(n)>=0||(s[n]=e[n]);return s}(e,["components"]);return s.a.createElement(o.MDXTag,{name:"wrapper",Layout:this.layout,layoutProps:Object.assign({},r,n),components:a},s.a.createElement(o.MDXTag,{name:"h2",components:a},"Usando Netlify para nuestro proyecto"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Bueno, como algunos habr√°n visto, casi todos mis slides y proyectos los tengo\nsubidos a ",s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://www.netlify.com"}},"Netlify"),", es ","(","m√°s que",")"," un hosting bastante\ncopado y facilita mucho el subir proyectos hechos por ejemplo con ",s.a.createElement("code",{className:"language-text"},"create-react-app"),".\nTambi√©n tienen algo que se llama Netlify CLI (Command Line Interface) y Netlify Functions.\nEs decir, vamos a usar varias cosas del paquete de Netlify üòé"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Antes que nada, vamos a usar una ",s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://www.netlify.com/docs/functions/"}},"lambda function ","(","en ingl√©s",")"),"\npara mantener a salvo nuestra API key que tenemos en nuestro archivo ",s.a.createElement("code",{className:"language-text"},".env.development.local"),"!\nPara los que hicieron la versi√≥n anterior de este workshop, es parecido a lo que hac√≠amos antes,\npero los amigotes de webtask parece que no aceptan nuevos registros... üôÑ ","(","Gracias ",s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://twitter.com/ivanmeyer_"}},"Iv√°n Meyer"),"\npor avisarme",")"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Empecemos por crear una carpeta en la ra√≠z de nuestro proyecto que se llame ",s.a.createElement("code",{className:"language-text"},"functions"),", deber√≠a quedar\na la misma altura que nuestro ",s.a.createElement("code",{className:"language-text"},"package.json")," y dem√°s carpetas. Dentro de esa carpeta creamos un archivo\ncon extensi√≥n js cuyo nombre va a definir la url despu√©s a donde tengamos que hacer nuestro ",s.a.createElement("code",{className:"language-text"},"fetch"),",\npor ejemplo le ponemos de nombre ",s.a.createElement("code",{className:"language-text"},"getWeather.js"),"."),s.a.createElement(o.MDXTag,{name:"p",components:a},"Ahora todo lo que tengamos ah√≠ adentro de nuestra ",s.a.createElement(o.MDXTag,{name:"em",components:a,parentName:"p"},"lambda function")," va a funcionar como un estilo\nde backend para nosotros. Lo que vamos a hacer b√°sicamente para pedir la data del clima ser√≠a algo as√≠:"),s.a.createElement(o.MDXTag,{name:"p",components:a},s.a.createElement("code",{className:"language-text"},"Frontend usando fetch -> Lambda Function usando request -> Apixu")),s.a.createElement(o.MDXTag,{name:"p",components:a},"Explicado en palabras, desde nuestro frontend usando ",s.a.createElement("code",{className:"language-text"},"fetch"),", hacemos una petici√≥n a una URL que apunta\na nuestra Lambda Function, desde la cual usando ",s.a.createElement("code",{className:"language-text"},"request")," hacemos la petici√≥n a Apixu. Luego la data\nfluye al rev√©s con la respuesta de lo que nos retorne el servicio de Apixu.\nSi todav√≠a no se entiende (es muy probable, porque no explico muy bien üòÖ),\n",s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://blog.makeitreal.camp/que-es-un-api/#c%C3%B3mo-funciona-un-web-api"}},"este link")," puede ser de gran ayuda."),s.a.createElement(o.MDXTag,{name:"p",components:a},"Una vez adentro del archivo ",s.a.createElement("code",{className:"language-text"},"getWeather.js"),", vamos a crear un endpoint nuevo, el cual debe quedar as√≠:"),s.a.createElement("div",{className:"gatsby-highlight","data-language":"javascript"},s.a.createElement("pre",{className:"language-javascript"},s.a.createElement("code",{className:"language-javascript"},"exports",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function-variable function"},"handler")," ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token parameter"},"event",s.a.createElement("span",{className:"token punctuation"},",")," context",s.a.createElement("span",{className:"token punctuation"},",")," callback"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token operator"},"=>")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ",s.a.createElement("span",{className:"token comment"},"//Ac√° va nuestro c√≥digo"),"\n",s.a.createElement("span",{className:"token punctuation"},"}")))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Wow, y qu√© es eso? ü§™ Esto se parece un poco m√°s a c√≥mo ser√≠a c√≥digo en\nNodeJS ","(","un poco nom√°s",")",", pero a no asustarse que hay que modificar un par de cosas y ya lo\nsacamos andando üòâ Vamos de a poco: ",s.a.createElement("code",{className:"language-text"},"exports.handler")," representa nuestra funci√≥n y es el punto\nde entrada cuando hagan una petici√≥n a nuestro endpoint, la cual recibe\npor par√°metros un evento, un contexto y un","(","a",")"," callback. Donde ",s.a.createElement(o.MDXTag,{name:"strong",components:a,parentName:"p"},"event")," es un objeto donde\nvamos a tener datos de la petici√≥n que recibimos del Frontend ","(","tipo de petici√≥n HTTP, ya sea\nGET, POST, etc., datos recibidos del Frontend si es una petici√≥n POST; digamos que es donde pasa toda la magia",")",",\n",s.a.createElement(o.MDXTag,{name:"strong",components:a,parentName:"p"},"context")," pens√© que iba a tener un contexto desde d√≥nde se hac√≠a la petici√≥n o algo as√≠ pero parece que no,\nentonces no le encuentro mucha utilidad ü§∑‚Äç‚ôÇÔ∏è y ",s.a.createElement(o.MDXTag,{name:"strong",components:a,parentName:"p"},"callback")," es una funci√≥n que utilizamos para retornar\ndata procesada al frontend o avisamos que hubo un error."),s.a.createElement(o.MDXTag,{name:"ul",components:a},s.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"li",props:{href:"https://docs.aws.amazon.com/es_es/lambda/latest/dg/nodejs-prog-model-handler.html"}},"Docu de Lambda Functions de AWS (son las que usamos con Netlify)")),s.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"li",props:{href:"https://nodejs.org/en/docs/guides/anatomy-of-an-http-transaction/"}},"Docu de NodeJS para leer m√°s sobre transacciones HTTP (en ingl√©s)"))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Empecemos por chequear qu√© tipo de petici√≥n nos estar√≠an haciendo, nosotros\ndesde el Frontend vamos a hacer una petici√≥n de tipo ",s.a.createElement("code",{className:"language-text"},"GET")," utilizando ",s.a.createElement("code",{className:"language-text"},"fetch()"),"\ncomo ya hicimos. La informaci√≥n de la petici√≥n la encontramos en ",s.a.createElement("code",{className:"language-text"},"event.httpMethod"),",\nas√≠ que dentro de nuestra funci√≥n hacemos:"),s.a.createElement("div",{className:"gatsby-highlight","data-language":"javascript"},s.a.createElement("pre",{className:"language-javascript"},s.a.createElement("code",{className:"language-javascript"},"exports",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function-variable function"},"handler")," ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token parameter"},"event",s.a.createElement("span",{className:"token punctuation"},",")," context",s.a.createElement("span",{className:"token punctuation"},",")," callback"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token operator"},"=>")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ",s.a.createElement("span",{className:"token comment"},"//Chequeamos el tipo de petici√≥n HTTP, puede ser GET, POST..."),"\n","  ",s.a.createElement("span",{className:"token keyword"},"if")," ",s.a.createElement("span",{className:"token punctuation"},"("),"event",s.a.createElement("span",{className:"token punctuation"},"."),"httpMethod ",s.a.createElement("span",{className:"token operator"},"===")," ",s.a.createElement("span",{className:"token string"},"'GET'"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ",s.a.createElement("span",{className:"token comment"},"//Ac√° tenemos que buscar la data a apixu y retornarla en el "),"\n","    ",s.a.createElement("span",{className:"token comment"},"//body de un objeto usando la funci√≥n callback"),"\n","  ",s.a.createElement("span",{className:"token punctuation"},"}"),"\n",s.a.createElement("span",{className:"token punctuation"},"}")))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Bien, ahora tenemos que traernos la direcci√≥n de la API que nos la traemos del\nFrontend y necesitamos una forma de traernos la data porque ",s.a.createElement("code",{className:"language-text"},"fetch()")," no nos\nsirve ac√° ","(",'en el "backend"',")",". Empecemos por tener la URL de la API a mano as√≠ despu√©s la usamos\npara ir a buscar la data, en el rengl√≥n siguiente al ",s.a.createElement("code",{className:"language-text"},"exports.handler")," y afuera\ndel ",s.a.createElement("code",{className:"language-text"},"if")," nos guardamos la URL de la petici√≥n a apixu en una constante:"),s.a.createElement("div",{className:"gatsby-highlight","data-language":"javascript"},s.a.createElement("pre",{className:"language-javascript"},s.a.createElement("code",{className:"language-javascript"},s.a.createElement("span",{className:"token keyword"},"const")," request_url ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token template-string"},s.a.createElement("span",{className:"token string"},"`https://api.apixu.com/v1/forecast.json?key="),s.a.createElement("span",{className:"token interpolation"},s.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"$","{"),"\n","  ","process",s.a.createElement("span",{className:"token punctuation"},"."),"env",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token constant"},"REACT_APP_API_KEY"),"\n",s.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"}")),s.a.createElement("span",{className:"token string"},"&q=Buenos+Aires&days=6`"))))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Por el momento vamos a dejar as√≠ como est√° la constante ya que la vamos a configurar\nm√°s adelante de forma s√∫per f√°cil üòâ"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Buen√≠simo, ya tenemos la URL para buscar la data y sabemos que nuestra API key va a\nestar a salvo. Ahora tenemos que ir a buscar la data a nuestra ",s.a.createElement("code",{className:"language-text"},"request_url")," y\nretornarla en la respuesta de la funci√≥n ",s.a.createElement("code",{className:"language-text"},"callback"),". Para hacer esto tenemos un\npaquete llamado ",s.a.createElement("code",{className:"language-text"},"request")," que es bastante intuitivo y copado, vamos a agregarlo\na nuestro proyecto y luego lo incorporamos en la Lambda Function."),s.a.createElement(o.MDXTag,{name:"p",components:a},"En la terminal, en la ra√≠z de nuestro proyecto corremos el siguiente comando:"),s.a.createElement("div",{className:"gatsby-highlight","data-language":"bash"},s.a.createElement("pre",{className:"language-bash"},s.a.createElement("code",{className:"language-bash"},s.a.createElement("span",{className:"token function"},"npm")," ",s.a.createElement("span",{className:"token function"},"install")," request --save"))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Y una vez que se instala ya podemos usarlo en ",s.a.createElement("code",{className:"language-text"},"getWeather.js"),", primero lo importamos ","(","afuera\nde ",s.a.createElement("code",{className:"language-text"},"exports.handler"),", arriba de todo",")",":"),s.a.createElement("div",{className:"gatsby-highlight","data-language":"javascript"},s.a.createElement("pre",{className:"language-javascript"},s.a.createElement("code",{className:"language-javascript"},s.a.createElement("span",{className:"token keyword"},"const")," request ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token function"},"require"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token string"},"'request'"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";")))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Un momento, que importar no se hace con ",s.a.createElement("code",{className:"language-text"},"import"),"? No me mientas, Agustin! ü§¨\nBueno, no, no les miento üòÖ como dijimos que esto funcionar√≠a como un backend, as√≠ es\ncomo se importan paquetes en NodeJS por ejemplo."),s.a.createElement(o.MDXTag,{name:"p",components:a},"Ahora que ya lo tenemos importado, vamos a usarlo! Agregamos esto adentro de nuestro ",s.a.createElement("code",{className:"language-text"},"if"),":"),s.a.createElement("div",{className:"gatsby-highlight","data-language":"javascript"},s.a.createElement("pre",{className:"language-javascript"},s.a.createElement("code",{className:"language-javascript"},s.a.createElement("span",{className:"token keyword"},"if")," ",s.a.createElement("span",{className:"token punctuation"},"("),"event",s.a.createElement("span",{className:"token punctuation"},"."),"httpMethod ",s.a.createElement("span",{className:"token operator"},"===")," ",s.a.createElement("span",{className:"token string"},"'GET'"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ","request",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"get"),s.a.createElement("span",{className:"token punctuation"},"("),"request_url",s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token keyword"},"function"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token parameter"},"error",s.a.createElement("span",{className:"token punctuation"},",")," res",s.a.createElement("span",{className:"token punctuation"},",")," body"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ",s.a.createElement("span",{className:"token keyword"},"if")," ",s.a.createElement("span",{className:"token punctuation"},"("),"error",s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ",s.a.createElement("span",{className:"token function"},"callback"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token keyword"},"null"),s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ","statusCode",s.a.createElement("span",{className:"token punctuation"},":")," ",s.a.createElement("span",{className:"token number"},"500"),s.a.createElement("span",{className:"token punctuation"},","),"\n","        ","body",s.a.createElement("span",{className:"token punctuation"},":")," error","\n","      ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),"\n","    ",s.a.createElement("span",{className:"token punctuation"},"}")," ",s.a.createElement("span",{className:"token keyword"},"else")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ",s.a.createElement("span",{className:"token function"},"callback"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token keyword"},"null"),s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ","statusCode",s.a.createElement("span",{className:"token punctuation"},":")," ",s.a.createElement("span",{className:"token number"},"200"),s.a.createElement("span",{className:"token punctuation"},","),"\n","        ","body",s.a.createElement("span",{className:"token punctuation"},":")," body","\n","      ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),"\n","    ",s.a.createElement("span",{className:"token punctuation"},"}"),"\n","  ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},")"),"\n",s.a.createElement("span",{className:"token punctuation"},"}")))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Pero esto cada vez se complica m√°s! ü§¨ü§¨ü§¨ Bueno, parece complejo pero\nyo creo que explicando cada parte se entiende bien lo que estamos haciendo: Con\n",s.a.createElement("code",{className:"language-text"},"request.get")," vamos a ir a buscar a nuestra URL la data de apixu, luego esa data\nque se consiga, se recibe en la funci√≥n que est√° como segundo par√°metro de\n",s.a.createElement("code",{className:"language-text"},"get"),", en la cual tendremos en ",s.a.createElement("code",{className:"language-text"},"error")," el objeto de error si llegase a haber\nalguno ","(","crucemos los deditos para que no ü§û",")",", en ",s.a.createElement("code",{className:"language-text"},"res")," tendremos otro objeto\nde respuesta de esta funci√≥n y en ",s.a.createElement("code",{className:"language-text"},"body")," vamos a tener la data que recibamos de hacer el\n",s.a.createElement("code",{className:"language-text"},"request.get")," a la API de apixu, es decir, el JSON que antes obten√≠amos al hacer el\n",s.a.createElement("code",{className:"language-text"},"fetch()")," en el Frontend. Luego chequeamos si hay un error, y si lo hay retornamos\nen la funci√≥n ",s.a.createElement("code",{className:"language-text"},"callback")," dos par√°metros: el primero se utiliza para informar errores,\npero vamos a enviar ",s.a.createElement("code",{className:"language-text"},"null")," para luego poder enviar al Frontend un objeto ","(","como segundo par√°metro",")","\ninformando el c√≥digo de estado 500 ","(","c√≥digo de error",")"," y un ",s.a.createElement("code",{className:"language-text"},"body")," con los detalles del error.\nLo mismo hacemos despu√©s, en el caso que no haya habido fallo, informamos un c√≥digo de estado 200\n","(","todo ok ‚úÖ",")"," y en ",s.a.createElement("code",{className:"language-text"},"body")," mandamos lo que nos retorna el resultado de la API de Apixu."),s.a.createElement(o.MDXTag,{name:"p",components:a},"Con esto podr√≠amos decir que ya estar√≠a hecha la ",s.a.createElement(o.MDXTag,{name:"em",components:a,parentName:"p"},"Lambda Function")," de manera b√°sica para hacer\nlo que necesitamos: No exponer nuestra API key y que nos busque la data que necesitamos.\nNos deber√≠a haber quedado algo as√≠:"),s.a.createElement(l.d,null,s.a.createElement(l.b,null,s.a.createElement(l.a,null,"Soluciones"),s.a.createElement(l.a,null,"getWeather.js")),s.a.createElement(l.c,null,"Para ver la soluci√≥n de cada archivo hac√© click en las pesta√±as üëÜ"),s.a.createElement(l.c,null,s.a.createElement("div",{className:"gatsby-highlight","data-language":"javascript"},s.a.createElement("pre",{className:"language-javascript"},s.a.createElement("code",{className:"language-javascript"},s.a.createElement("span",{className:"token keyword"},"const")," request ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token function"},"require"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token string"},"'request'"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),"\n","\n","exports",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function-variable function"},"handler")," ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token parameter"},"event",s.a.createElement("span",{className:"token punctuation"},",")," context",s.a.createElement("span",{className:"token punctuation"},",")," callback"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token operator"},"=>")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","  ",s.a.createElement("span",{className:"token keyword"},"const")," request_url ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token template-string"},s.a.createElement("span",{className:"token string"},"`https://api.apixu.com/v1/forecast.json?key="),s.a.createElement("span",{className:"token interpolation"},s.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"$","{"),"\n","    ","process",s.a.createElement("span",{className:"token punctuation"},"."),"env",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token constant"},"REACT_APP_API_KEY"),"\n","  ",s.a.createElement("span",{className:"token interpolation-punctuation punctuation"},"}")),s.a.createElement("span",{className:"token string"},"&q=Buenos+Aires&days=6`")),s.a.createElement("span",{className:"token punctuation"},";"),"\n","  ",s.a.createElement("span",{className:"token keyword"},"if")," ",s.a.createElement("span",{className:"token punctuation"},"("),"event",s.a.createElement("span",{className:"token punctuation"},"."),"httpMethod ",s.a.createElement("span",{className:"token operator"},"===")," ",s.a.createElement("span",{className:"token string"},"'GET'"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ","request",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"get"),s.a.createElement("span",{className:"token punctuation"},"("),"request_url",s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token keyword"},"function"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token parameter"},"error",s.a.createElement("span",{className:"token punctuation"},",")," res",s.a.createElement("span",{className:"token punctuation"},",")," body"),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","      ",s.a.createElement("span",{className:"token keyword"},"if")," ",s.a.createElement("span",{className:"token punctuation"},"("),"error",s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",s.a.createElement("span",{className:"token function"},"callback"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token keyword"},"null"),s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","          ","statusCode",s.a.createElement("span",{className:"token punctuation"},":")," ",s.a.createElement("span",{className:"token number"},"500"),s.a.createElement("span",{className:"token punctuation"},","),"\n","          ","body",s.a.createElement("span",{className:"token punctuation"},":")," error","\n","        ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),"\n","      ",s.a.createElement("span",{className:"token punctuation"},"}")," ",s.a.createElement("span",{className:"token keyword"},"else")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",s.a.createElement("span",{className:"token function"},"callback"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token keyword"},"null"),s.a.createElement("span",{className:"token punctuation"},",")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","          ","statusCode",s.a.createElement("span",{className:"token punctuation"},":")," ",s.a.createElement("span",{className:"token number"},"200"),s.a.createElement("span",{className:"token punctuation"},","),"\n","          ","body",s.a.createElement("span",{className:"token punctuation"},":")," body","\n","        ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),"\n","      ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},";"),"\n","    ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),"\n","  ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},";"),"\n",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},";")))))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Ahora nos falta conectar el Frontend a nuestro endpoint! Esto nos lo simplifica\nbastante Netlify, nuestra funci√≥n va a estar en:\n",s.a.createElement("code",{className:"language-text"},"/.netlify/functions/NOMBRE_DE_FUNCION"),", en nuestro caso va a ser ",s.a.createElement("code",{className:"language-text"},"/.netlify/functions/getWeather"),".\nCopiamos el texto y vamos al Frontend de nuestra app, donde hicimos el ",s.a.createElement("code",{className:"language-text"},"fetch()")," y\npegamos la URL nueva adentro. Guardamos el archivo y seguimos, vamos a probar si todo funciona!"),s.a.createElement(l.d,null,s.a.createElement(l.b,null,s.a.createElement(l.a,null,"Soluciones"),s.a.createElement(l.a,null,"C√≥mo deber√≠a quedar nuestro fetch")),s.a.createElement(l.c,null,"Para ver la soluci√≥n de cada archivo hac√© click en las pesta√±as üëÜ"),s.a.createElement(l.c,null,s.a.createElement("div",{className:"gatsby-highlight","data-language":"javascript"},s.a.createElement("pre",{className:"language-javascript"},s.a.createElement("code",{className:"language-javascript"},s.a.createElement("span",{className:"token function"},"componentDidMount"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token punctuation"},")")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","    ",s.a.createElement("span",{className:"token function"},"fetch"),s.a.createElement("span",{className:"token punctuation"},"("),"\n","      ",s.a.createElement("span",{className:"token template-string"},s.a.createElement("span",{className:"token string"},"`/.netlify/functions/getWeather`")),"\n","    ",s.a.createElement("span",{className:"token punctuation"},")"),"\n","      ",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"then"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token parameter"},"result")," ",s.a.createElement("span",{className:"token operator"},"=>")," result",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"json"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},")"),"\n","      ",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"then"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token parameter"},"data")," ",s.a.createElement("span",{className:"token operator"},"=>")," ",s.a.createElement("span",{className:"token punctuation"},"{"),"\n","        ",s.a.createElement("span",{className:"token comment"},"//Cambiamos la resoluci√≥n del √≠cono del d√≠a actual para que sea m√°s grande"),"\n","        ","data",s.a.createElement("span",{className:"token punctuation"},"."),"current",s.a.createElement("span",{className:"token punctuation"},"."),"condition",s.a.createElement("span",{className:"token punctuation"},"."),"icon ",s.a.createElement("span",{className:"token operator"},"=")," data",s.a.createElement("span",{className:"token punctuation"},"."),"current",s.a.createElement("span",{className:"token punctuation"},"."),"condition",s.a.createElement("span",{className:"token punctuation"},"."),"icon",s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"replace"),s.a.createElement("span",{className:"token punctuation"},"("),"\n","          ",s.a.createElement("span",{className:"token string"},'"64x64"'),s.a.createElement("span",{className:"token punctuation"},","),"\n","          ",s.a.createElement("span",{className:"token string"},'"128x128"'),"\n","        ",s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),"\n","        ",s.a.createElement("span",{className:"token keyword"},"this"),s.a.createElement("span",{className:"token punctuation"},"."),s.a.createElement("span",{className:"token function"},"setState"),s.a.createElement("span",{className:"token punctuation"},"("),s.a.createElement("span",{className:"token punctuation"},"{")," clima",s.a.createElement("span",{className:"token punctuation"},":")," data",s.a.createElement("span",{className:"token punctuation"},",")," isLoaded",s.a.createElement("span",{className:"token punctuation"},":")," ",s.a.createElement("span",{className:"token boolean"},"true")," ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),"\n","      ",s.a.createElement("span",{className:"token punctuation"},"}"),s.a.createElement("span",{className:"token punctuation"},")"),s.a.createElement("span",{className:"token punctuation"},";"),"\n",s.a.createElement("span",{className:"token punctuation"},"}")))))),s.a.createElement(o.MDXTag,{name:"h2",components:a},"Haciendo deploy de nuestra app"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Antes que nada, al haber hecho nuestra funci√≥n, debemos indicarle a Netlify en qu√©\ncarpeta de nuestro proyecto tiene que buscarla, as√≠ que creamos un archivo en la\nra√≠z de nuestro proyecto y le ponemos de nombre ",s.a.createElement("code",{className:"language-text"},"netlify.toml"),", adentro escribimos\nlo siguiente:"),s.a.createElement("div",{className:"gatsby-highlight","data-language":"javascript"},s.a.createElement("pre",{className:"language-javascript"},s.a.createElement("code",{className:"language-javascript"},s.a.createElement("span",{className:"token punctuation"},"["),"build",s.a.createElement("span",{className:"token punctuation"},"]"),"\n","  ","functions ",s.a.createElement("span",{className:"token operator"},"=")," ",s.a.createElement("span",{className:"token string"},'"./functions"')))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Como s√© que hay personas que no conf√≠an en los permisos de third parties sobre c√≥digo\nde Github, vamos a ver dos formas de hacerlo:"),s.a.createElement(o.MDXTag,{name:"ul",components:a},s.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"li",props:{href:"#vinculando-nuestro-github"}},"Vinculando nuestro Github")),s.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"li",props:{href:"#sin-vincular-nuestro-github"}},"Sin vincular nuestro Github"))),s.a.createElement(o.MDXTag,{name:"h3",components:a},"Vinculando nuestro Github"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Si vinculamos nuestra cuenta de ",s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://www.github.com"}},"Github"),", para subir nuestro\nproyecto es tan simple como entrar a nuestro usuario en Netlify y decirle cu√°l es el\nproyecto del que queremos que haga el ",s.a.createElement("code",{className:"language-text"},"deploy"),", pero para eso primero tenemos que subir\nnuestra app del clima a un repo nuestro, no? Peque√±o detalle üòú Comencemos por entrar a nuestro\nusuario de Github, a la parte de repositorios y creemos uno nuevo con el bot√≥n\nverde ",s.a.createElement(o.MDXTag,{name:"strong",components:a,parentName:"p"},"New")," que est√° a la derecha, o ",s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://www.github.com/new"}},"entrando en este link"),".\nLuego escribimos un nombre para nuestro repositorio ","(",'por ejemplo "ClimaApp"',")"," y no hace\nfalta que pongamos descripci√≥n ni que lo inicialicemos con un README. Vamos al bot√≥n de abajo\nde todo y terminamos de crear nuestro repositorio. Se nos va a crear un repositorio vac√≠o\ny el mismo Github que es re copado nos va a decir c√≥mo subir nuestro proyecto\ndonde dice ",s.a.createElement("code",{className:"language-text"},"‚Ä¶or push an existing repository from the command line"),". Entonces\nabrimos una terminal y vamos hasta la carpeta ra√≠z de nuestra app, luego ah√≠\nhacemos lo que nos dice Github:"),s.a.createElement("div",{className:"gatsby-highlight","data-language":"bash"},s.a.createElement("pre",{className:"language-bash"},s.a.createElement("code",{className:"language-bash"},s.a.createElement("span",{className:"token function"},"git")," remote ",s.a.createElement("span",{className:"token function"},"add")," origin https://github.com/agustinmulet/ClimaApp.git","\n",s.a.createElement("span",{className:"token function"},"git")," push -u origin master"))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Es probable que nos pida nuestro usuario y constrase√±a de Github, en ese caso\ningresamos nuestras credenciales y si todo sali√≥ bien, ya tenemos nuestra app\nsubida a un repo propio!"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Ahora resta hacer lo que dije antes, entrar con nuestro usuario a Netlify,\nhacer click en el bot√≥n verde de arriba a la derecha que dice ",s.a.createElement(o.MDXTag,{name:"strong",components:a,parentName:"p"},"New site from Git")," e\nindicarle cu√°l es el repositorio con nuestra app ","(","ClimaApp si le pusieron el\nmismo nombre que yo",")",", esperamos un poco que haga el deploy y ya ","(","casi",")"," est√°! Lo que\ns√≠, Netlify nos da un nombre raro para nuestro sitio, as√≠ que podemos ir a\n",s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"#cambiando-la-url"}},s.a.createElement(o.MDXTag,{name:"strong",components:a,parentName:"a"},"Cambiando la URL")),"."),s.a.createElement(o.MDXTag,{name:"h3",components:a},"Sin vincular nuestro Github"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Si no te gusta andar vinculando tu Github con cualquier cosa, o si no us√°s o no\nten√©s Github, no te preocupes, se puede subir nuestro proyecto igual üòä"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Empecemos por instalarnos la CLI de Netlify de forma global, en la terminal corremos:"),s.a.createElement("div",{className:"gatsby-highlight","data-language":"bash"},s.a.createElement("pre",{className:"language-bash"},s.a.createElement("code",{className:"language-bash"},s.a.createElement("span",{className:"token function"},"npm")," i -g netlify-cli"))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Y luego nos hacemos cuenta en ",s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://www.netlify.com"}},"Netlify")," y logueamos con nuestra cuenta de\nNetlify ","(","en la terminal",")",":"),s.a.createElement("div",{className:"gatsby-highlight","data-language":"bash"},s.a.createElement("pre",{className:"language-bash"},s.a.createElement("code",{className:"language-bash"},"netlify login"))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Para hacer el deploy, necesitamos nuestra app lista para producci√≥n, la generamos\ncorriendo el siguiente comando: "),s.a.createElement("div",{className:"gatsby-highlight","data-language":"bash"},s.a.createElement("pre",{className:"language-bash"},s.a.createElement("code",{className:"language-bash"},s.a.createElement("span",{className:"token function"},"npm")," run build"))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Y vamos a ver que se crea una carpeta ",s.a.createElement("code",{className:"language-text"},"build")," con nuestra app lista para hacer el\ndeploy, pero usamos la CLI para hacer esto as√≠ se sube la funci√≥n que hicimos y\ndejamos que Netlify haga un poquito de su magia. "),s.a.createElement(o.MDXTag,{name:"p",components:a},"‚ö†Ô∏è Ni√±as y ni√±os, no intenten esto en sus casas ‚ö†Ô∏è ü§£ü§£"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Vamos entonces con el deploy a producci√≥n, en la terminal:"),s.a.createElement("div",{className:"gatsby-highlight","data-language":"bash"},s.a.createElement("pre",{className:"language-bash"},s.a.createElement("code",{className:"language-bash"},"netlify deploy --prod"))),s.a.createElement(o.MDXTag,{name:"p",components:a},"Esto nos va a indicar que no tenemos nuestro proyecto vinculado a ning√∫n sitio\nexistente en Netlify, pero nosotros queremos hacer uno nuevo, as√≠ que con las\nflechitas seleccionamos ",s.a.createElement("code",{className:"language-text"},"Create & configure a new site")," y luego nos pregunta un\nnombre para nuestro sitio ","(","podemos hacerlo ahora o luego en ",s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"#cambiando-la-url"}},s.a.createElement(o.MDXTag,{name:"strong",components:a,parentName:"a"},"Cambiando la URL")),")",'.\nLo siguiente que consulta es en qu√© "Team" queremos agregar nuestro proyecto, si\nno les pregunta esto seguramente les pida usuario y contrase√±a porque no se loguearon\nantes, no pasa nada.'),s.a.createElement(o.MDXTag,{name:"p",components:a},"Luego crea nuestro sitio, nos informa URL de Admin, URL donde va a estar alojada\nnuestra app y un ID de sitio ","(","el cual va a estar en un archivo ",s.a.createElement("code",{className:"language-text"},"/.netlify/state.json")," de\nconfiguraci√≥n en nuestro proyecto",")"," y nos pide luego el path donde est√° nuestra app\npreparada para hacer deploy, que es la carpeta ",s.a.createElement("code",{className:"language-text"},"build")," que generamos antes, entonces\nescribimos ",s.a.createElement(o.MDXTag,{name:"strong",components:a,parentName:"p"},"build")," y apretamos enter y ya ","(","casi",")"," est√°! Si no pudimos generar\nla url que quer√≠amos o queremos cambiarla, en la siguiente secci√≥n podremos hacerlo."),s.a.createElement(o.MDXTag,{name:"h3",components:a},"Cambiando la URL"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Para cambiar el nombre al que querramos ","(","nombredeapp.netlify.com",")",", tenemos que\n","(","si es que estamos en el Dashboard principal de Netlify",")"," hacer click en\nnuestra app reci√©n subida con nombre raro, hacer click en el bot√≥n\n",s.a.createElement("code",{className:"language-text"},"‚öô Site Settings")," y en la parte de ",s.a.createElement("code",{className:"language-text"},"Site Information")," vamos a ver otro bot√≥n\n",s.a.createElement("code",{className:"language-text"},"Change site name"),", donde podemos definir el nombre que querramos. Es probable\nque alg√∫n nombre como ClimaApp est√© utilizado, pero podemos inventar algo usando\nnuestro nombre, o alg√∫n nombre raro que se les ocurra ","(","climarino, weatherapp,\nmiappdelclima, loquesea jaja",")","."),s.a.createElement(o.MDXTag,{name:"h3",components:a},"Agregando nuestra variable de entorno el proyecto"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Lo √∫ltimo que tenemos que hacer para que nuestra app funcione bien!\nHayas elegido vincular con Github o no, la verdad que esta es la √∫nica forma que\nencontr√© que realmente funciona para crear variables de entorno, porque supuestamente\nal agregarla en el archivo ",s.a.createElement("code",{className:"language-text"},"netlify.toml")," se puede probar todo de manera local\nusando Netlify Dev, pero al estar en Beta parece que faltan ajustar algunos tornillos. ","(","O soy\nyo que no tengo idea de c√≥mo usarlo bien, si alguien sabe que me avise ",s.a.createElement(o.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://twitter.com/AgustinDMulet"}},s.a.createElement(o.MDXTag,{name:"strong",components:a,parentName:"a"},"este es mi Twitter")),")"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Bueno basta de ch√°chara, la variable! Para esto vamos a ",s.a.createElement("code",{className:"language-text"},"‚öô Site Settings")," de nuestro proyecto y\nah√≠ dentro a ",s.a.createElement("code",{className:"language-text"},"Build & deploy"),", ",s.a.createElement("code",{className:"language-text"},"Environment")," y creamos una nueva haciendo click en el bot√≥n\n",s.a.createElement("code",{className:"language-text"},"Edit variables"),". Nos pide Clave / Valor, por practicidad vamos a poner como clave el nombre\nque venimos usando ",s.a.createElement("code",{className:"language-text"},"REACT_APP_API_KEY"),"y como valor ponemos nuestra API key ",s.a.createElement("code",{className:"language-text"},"0df7569d7af3432a93217005XXXXXXX"),"\ntodo as√≠ sin comillas, solamente el texto."),s.a.createElement(o.MDXTag,{name:"p",components:a},"Guardamos, es posible que tengamos que repetir el tema del deploy, pero bueno,\nno es √≥ptimo pero es la forma que encontr√© que funciona..."),s.a.createElement(o.MDXTag,{name:"p",components:a},s.a.createElement(o.MDXTag,{name:"strong",components:a,parentName:"p"},"Listo!")," Espero que hayan disfrutado este workshop y cualquier cosa que les\nparezca mejorable o que no est√© claramente explicada, manden PR para poder hacer\nun buen workshop de React desde cero y que m√°s gente pueda aprender."),s.a.createElement(o.MDXTag,{name:"p",components:a},"Adem√°s, si tienen ganas, pongan una foto en Twitter de su app funcionando, para\ncontagiar a que m√°s personas lo hagan :) y pueden alterar el CSS, lo que\nquieran!"),s.a.createElement(o.MDXTag,{name:"h2",components:a},"C√≥mo seguir desde ac√°?"),s.a.createElement(o.MDXTag,{name:"p",components:a},"Ahora la idea es ir mejorando lo que tenemos, les tiro un par de ideas de cosas\nque se pueden hacer:"),s.a.createElement(o.MDXTag,{name:"ul",components:a},s.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},"Mostrar m√°s datos"),s.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},"Reacomodar cosas en el layout"),s.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},"Hacer nuestra app responsive"),s.a.createElement(o.MDXTag,{name:"li",components:a,parentName:"ul"},"Agregar un input y buscar el clima en distintas ciudades")),s.a.createElement(o.MDXTag,{name:"p",components:a},"Mil cosas m√°s se pueden hacer, pero esas me parecen copadas. Y si te anim√°s a\nagregar el input para buscar en distintas ciudades, me gustar√≠a verlo! üòÑüòÑ"))},t}(s.a.Component),p={}}}]);
//# sourceMappingURL=component---src-pages-paso-03-mdx-598fac51f91a7683a1dd.js.map