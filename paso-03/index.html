<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/reactworkshop/1.3c09133930ce096487b3.css">.react-tabs{-webkit-tap-highlight-color:transparent}.react-tabs__tab-list{border-bottom:1px solid #aaa;margin:0 0 10px;padding:0}.react-tabs__tab{display:inline-block;border:1px solid transparent;border-bottom:none;bottom:-1px;position:relative;list-style:none;padding:6px 12px;cursor:pointer}.react-tabs__tab--selected{background:#fff;border-color:#aaa;color:#000;border-radius:5px 5px 0 0}.react-tabs__tab--disabled{color:GrayText;cursor:default}.react-tabs__tab:focus{box-shadow:0 0 5px #0188fe;border-color:#0188fe;outline:none}.react-tabs__tab:focus:after{content:"";position:absolute;height:5px;left:-4px;right:-4px;bottom:-5px;background:#fff}.react-tabs__tab-panel{display:none}.react-tabs__tab-panel--selected{display:block}</style><meta name="generator" content="Gatsby 2.0.91"/><title data-react-helmet="true">Workshop - Paso 3 | React Workshop</title><meta data-react-helmet="true" name="description" content="Workshop de React para aprender las bases realizando una app del clima."/><meta data-react-helmet="true" property="og:title" content="Workshop - Paso 3"/><meta data-react-helmet="true" property="og:description" content="Workshop de React para aprender las bases realizando una app del clima."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@agustinmulet"/><meta data-react-helmet="true" name="twitter:title" content="Workshop - Paso 3"/><meta data-react-helmet="true" name="twitter:description" content="Workshop de React para aprender las bases realizando una app del clima."/><link rel="shortcut icon" href="/reactworkshop/icons/icon-48x48.png"/><link rel="manifest" href="/reactworkshop/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><style data-styled="WXxWL btnaKj kziUgX dEQjWb cySOYw rPADO dJzbvK gWbzFN kkhQBH dVLbtd kBAxEJ edxkLf gxTZxC ezkzzD spRJx iQiGar crtzMT" data-styled-version="4.1.3">
/* sc-component-id: Framework__Container-sc-1kcsy75-1 */
.gWbzFN{position:relative;max-width:940px;padding:0 5%;margin:0 auto;} @media (min-width:576px){.gWbzFN{padding:0 25px;}} @media (min-width:768px){.gWbzFN{padding:0 40px;}} @media (min-width:992px){.gWbzFN{padding:0 50px;}}
/* sc-component-id: Framework__Link-sc-1kcsy75-4 */
.cySOYw{color:inherit;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.15s;transition:color 0.15s;}
/* sc-component-id: Framework__Flex-sc-1kcsy75-6 */
.edxkLf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .edxkLf > div{margin-right:15px;margin-bottom:15px;}.gxTZxC{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;} .gxTZxC > div{margin-right:15px;margin-bottom:15px;}
/* sc-component-id: Nav__Navbar-sc-1ofyja1-0 */
.WXxWL{display:none;position:fixed;top:0;bottom:0;width:250px;border-right:1px solid rgba(0,16,64,0.08);background-clip:padding-box;padding:16px 0;background:#346ca4;color:white;overflow-y:auto;z-index:1;-webkit-transform:translate3d(-100%,0,0);-ms-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);-webkit-transition:-webkit-transform 0.3s,visibility 0.2s;-webkit-transition:transform 0.3s,visibility 0.2s;transition:transform 0.3s,visibility 0.2s;-webkit-transition-timing-function:cubic-bezier(.77,0,.175,1);transition-timing-function:cubic-bezier(.77,0,.175,1);visibility:hidden;} @media (min-width:992px){.WXxWL{display:block;visibility:visible;-webkit-transform:none;-ms-transform:none;transform:none;}}
/* sc-component-id: Nav__List-sc-1ofyja1-1 */
.kziUgX{list-style:none;padding-left:0;margin:0;}
/* sc-component-id: Nav__ListItem-sc-1ofyja1-2 */
.dEQjWb{margin:0;} .dEQjWb:not(:last-child){border-bottom:1px dotted rgba(0,16,64,0.1);} .dEQjWb > a{display:block;padding:12px 25px;} .dEQjWb > a:hover{border-bottom-color:transparent;}
/* sc-component-id: Nav__XButton-sc-1ofyja1-3 */
.btnaKj{position:absolute;right:10px;background:none;border:none;color:inherit;padding:0;} @media (min-width:992px){.btnaKj{display:none;}}
/* sc-component-id: NavButtons__FadedText-ii0ddk-0 */
.iQiGar{position:relative;top:-2px;opacity:0.4;font-size:70%;margin-right:10px;font-weight:bold;display:block;} @media (min-width:768px){.iQiGar{display:inline;}}
/* sc-component-id: NavButtons__NavButton-ii0ddk-1 */
.spRJx{display:block;padding:40px 25px;border:1px solid rgba(0,16,64,0.15);border-radius:4px;background:white;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-weight:bold;-webkit-transition:box-shadow 0.2s;transition:box-shadow 0.2s;-webkit-flex:1;-ms-flex:1;flex:1;margin:0 10px;max-width:500px;font-size:20px;-webkit-transition:all 0.1s;transition:all 0.1s;} .spRJx:hover{border-color:inherit;} @media (min-width:768px){.spRJx{font-size:24px;}}
/* sc-component-id: Header__HeaderRoot-sc-9eu2yh-0 */
.dJzbvK{position:relative;background:linear-gradient(91deg,#f1eefc,#9dc6ff 70%,#a5bcff);padding:25px 0 5px 0;text-align:center;margin-bottom:50px;}
/* sc-component-id: Header__Logo-sc-9eu2yh-1 */
.dVLbtd{height:60px;margin:0px;}
/* sc-component-id: Header__Title-sc-9eu2yh-2 */
.kBAxEJ{font-size:48px;font-weight:600;margin-top:0;margin-bottom:8px;}
/* sc-component-id: Header__ButtonLink-sc-9eu2yh-3 */
.ezkzzD{color:inherit;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.15s;transition:color 0.15s;background:rgba(255,255,255,0.2);border:1px solid rgba(255,255,255,0.4);padding:12px 24px;border-radius:4px;-webkit-transition:all 0.15s;transition:all 0.15s;color:#4574c0;margin:0 10px 10px;font-weight:500;position:absolute;right:0px;top:0px;} .ezkzzD:hover{color:#2263e5;} .ezkzzD:hover{background:white;border-bottom-color:white;box-shadow:0 8px 16px -2px rgba(0,32,128,0.25);}
/* sc-component-id: Header__MenuButton-sc-9eu2yh-4 */
.kkhQBH{position:absolute;top:-10px;left:15px;color:inherit;font-weight:bold;border:none;background:none;text-transform:uppercase;border-radius:4px;padding:0;} @media (min-width:992px){.kkhQBH{display:none;}}
/* sc-component-id: Main-sc-7otpyo-0 */
@media (min-width:992px){.rPADO{margin-left:250px;}}
/* sc-component-id: Footer-sc-1xqajj9-0 */
.crtzMT{text-align:center;padding:25px 0;border-top:1px solid rgba(0,16,64,0.08);margin-top:50px;color:#9dacb6;font-size:85%;background:white;}
/* sc-component-id: sc-global-4133547688 */
html{box-sizing:border-box;height:100%;} *,*::after,*::before{box-sizing:inherit;} body{font-family:'Nunito Sans',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;margin:0;color:#324b64;height:100%;font-size:17px;-webkit-tap-highlight-color:transparent;} :focus:not(.focus-visible){outline:0;} ::-moz-selection{background:#21B7EC;color:white;} ::selection{background:#21B7EC;color:white;} a{color:#0065d5;-webkit-text-decoration:none;text-decoration:none;border-bottom:1px solid transparent;-webkit-transition:border-bottom-color 0.15s;transition:border-bottom-color 0.15s;} a:hover{border-bottom-color:inherit;} h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:1rem;} h1 > a,h2 > a,h3 > a,h4 > a,h5 > a,h6 > a{color:inherit;padding-bottom:0.25rem;} h1{font-size:2.488rem;margin-top:2.488rem;} h2{font-size:2.074rem;margin-top:2.074rem;border-bottom:1px solid rgba(0,32,128,0.1);padding-bottom:10px;margin-bottom:1.5rem;} h3{font-size:1.728rem;margin-top:1.728rem;} h4{font-size:1.44rem;margin-top:1.5rem;} h5{font-size:1.2rem;} p,li{line-height:1.6;margin-top:0.5rem;} table{box-shadow:0 0 0 1px rgba(0,32,128,0.1);border-collapse:collapse;margin:0;padding:0;width:100%;line-height:1.4;border-radius:0 0 10px 10px;} table tr{padding:5px;} table tr:not(:last-child){border-bottom:1px dotted rgba(0,32,128,0.1);} td:first-child code{background:none;font-size:90%;color:inherit;padding:0;} table th,table td{padding:16px;text-align:left;} table th{position:relative;z-index:1;font-size:14px;text-transform:uppercase;background:#eeeefa;position:-webkit-sticky;position:sticky;top:0;} @media (max-width:1150px){table{border:0;box-shadow:none;}table thead{display:none;}table tr{border:1px solid rgba(0,32,128,0.1);display:block;margin-bottom:10px;border-radius:10px;}table td{display:block;}table td:not(:last-child){border-bottom:1px dotted rgba(0,32,128,0.1);}table td:last-child{border-bottom:0;}table td::before{content:attr(data-label);display:block;font-weight:bold;text-transform:uppercase;opacity:0.7;font-size:13px;margin-bottom:5px;}td:first-child code{font-size:100%;}} hr{border:none;border-top:1px solid rgba(0,16,64,0.15);margin-top:5px;} .react-tabs{padding:14px;box-shadow:0.055rem 0.055rem 1.11rem rgba(20,20,20,0.27);margin-bottom:24px;}
/* sc-component-id: sc-global-3887041591 */
code,pre{font-family:Menlo,Consolas,'Liberation Mono',Courier,monospace;} code[class*='language-'],pre[class*='language-']{color:#cee6ff;background:none;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:2.25;font-size:90%;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;} pre[class*='language-']{padding:16px 5%;margin-top:0;margin-left:-5.55%;margin-right:-5.55%;background:#22223f;font-size:15px;line-height:2;max-height:650px;overflow:auto;-webkit-overflow-scrolling:touch;} pre[class*='language-'] [data-elastic-wrapper]{display:inline-block;} @media (min-width:576px){pre[class*='language-']{margin-left:-25px;margin-right:-25px;padding:16px 25px;}} @media (min-width:768px){pre[class*='language-']{border-radius:8px;margin-left:0;margin-right:0;padding:16px 24px;font-size:16px;}} code.language-text{background:linear-gradient(90deg,#f3edff,#edf5ff);color:#2569d7;font-weight:bold;padding:0.2em 0.4em;border-radius:4px;font-size:85%;line-height:inherit;} .token.important,.token.atrule,.token.keyword{color:#bc90ff;} .token.comment,.token.prolog,.token.doctype,.token.cdata{color:#7692d9;} .token.attr-name,.token.selector{color:#ffb07b;} .token.boolean{color:#ff81d0;} .token.punctuation,.token.operator,.token.op,.token.module{color:#6ed3ff;} .token.nil{color:#9b9fb0;} .token.arrow{color:#c49dff;} .token.parameter{color:#ffc5ff;} .token.flow{color:#e99eff;font-style:italic;} .token.spread{font-weight:bold;color:#ff7e99;text-shadow:0px 1px 6px;} .namespace{opacity:0.7;} .token.tag{color:#ff6c8b;} .token.number,.token.symbol,.token.deleted{color:#ff984b;} .token.string,.language-css .token.string,.token.url,.token.attr-value,.token.char,.token.builtin,.token.inserted{color:#4ef2d0;} .token.entity,.style .token.string{color:#ecd6ba;text-shadow:0 1px 3px transparentize(#ecd6ba,0.5);} .token.function,.token.property{color:#61a5ff;} .token.method{color:#16c5ff;} .token.variable{color:#ffad92;} .token.dom,.token.class-name{color:#ffd278;} .token.property.definition{color:#b6e992;} .token.property.access{color:#8ec1ef;} .token.regex{color:#88ecff;} .token.bold{font-weight:bold;} .token.italic{font-style:italic;} .token.entity{cursor:help;}</style><link href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,600,700" rel="stylesheet"/><link as="script" rel="preload" href="/reactworkshop/1-b1064bb1cb8701ea69d6.js"/><link as="script" rel="preload" href="/reactworkshop/component---src-pages-paso-03-mdx-be1c7ecc40bd59a738ef.js"/><link as="script" rel="preload" href="/reactworkshop/app-e0fd2abbc6654a1f5e94.js"/><link as="script" rel="preload" href="/reactworkshop/0-51220cff6843dcb47fe8.js"/><link as="script" rel="preload" href="/reactworkshop/webpack-runtime-b4b73ca925a44438209f.js"/><link as="fetch" rel="preload" href="/reactworkshop/static/d/379/path---paso-03-0-f-6-386-AIqyXuZNkOp6VN5U0x8yW4Paqw.json" crossOrigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><nav tabindex="-1" aria-label="Menu" style="transition:" class="Nav__Navbar-sc-1ofyja1-0 WXxWL"><div data-elastic-wrapper="true"><button aria-label="Close Menu" class="Nav__XButton-sc-1ofyja1-3 btnaKj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:36px;height:36px"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button><ul class="Nav__List-sc-1ofyja1-1 kziUgX"><li class="Nav__ListItem-sc-1ofyja1-2 dEQjWb"><a class="Framework__Link-sc-1kcsy75-4 cySOYw" href="/reactworkshop/">Index</a></li><li class="Nav__ListItem-sc-1ofyja1-2 dEQjWb"><a class="Framework__Link-sc-1kcsy75-4 cySOYw" href="/reactworkshop/intro">Introducción</a></li><li class="Nav__ListItem-sc-1ofyja1-2 dEQjWb"><a class="Framework__Link-sc-1kcsy75-4 cySOYw" href="/reactworkshop/props-y-state/">Props y State</a></li><li class="Nav__ListItem-sc-1ofyja1-2 dEQjWb"><a class="Framework__Link-sc-1kcsy75-4 cySOYw" href="/reactworkshop/paso-01/">Workshop - Paso 1</a></li><li class="Nav__ListItem-sc-1ofyja1-2 dEQjWb"><a class="Framework__Link-sc-1kcsy75-4 cySOYw" href="/reactworkshop/paso-02/">Workshop - Paso 2</a></li><li class="Nav__ListItem-sc-1ofyja1-2 dEQjWb"><a aria-current="page" class="Framework__Link-sc-1kcsy75-4 cySOYw" style="font-weight:bold;background:linear-gradient(90deg, #9dc6ff , #346CA4);color:#324B6D" href="/reactworkshop/paso-03/">Workshop - Paso 3</a></li></ul></div></nav><main class="Main-sc-7otpyo-0 rPADO"><header class="Header__HeaderRoot-sc-9eu2yh-0 dJzbvK"><div class="Framework__Container-sc-1kcsy75-1 gWbzFN"><button aria-label="Menu" class="Header__MenuButton-sc-9eu2yh-4 kkhQBH"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:36px;height:36px"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button><img src="/reactworkshop/static/react-84d44aff3af7aab4ce4495c3de9c2e64.png" draggable="false" class="Header__Logo-sc-9eu2yh-1 dVLbtd"/><h1 class="Header__Title-sc-9eu2yh-2 kBAxEJ">React Workshop</h1><div class="Framework__Flex-sc-1kcsy75-6 edxkLf"><a target="_blank" rel="noopener noreferrer" href="https://github.com/agustinmulet/reactworkshop" class="Framework__ExternalLink-sc-1kcsy75-5 Header__ButtonLink-sc-9eu2yh-3 ezkzzD"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:-6px;margin-right:10px;color:#333"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>Github</a></div></div></header><div class="Framework__Container-sc-1kcsy75-1 gWbzFN"><h2>Workshop - Paso 3</h2><div><h2>Creando nuestra cuenta en Webtask</h2><p><em>Antes que nada, gracias <a href="https://twitter.com/lndgalante">Leo Galante</a> por el
datazo para hacer esto</em> 😁</p><p><strong>Webtask.io</strong> es un servicio que nos permite <!-- -->(<!-- -->entre otras cosas<!-- -->)<!-- --> lograr lo
que necesitamos, que en nuestro caso va a ser guardar la API key en un lugar
seguro que nos funcione como punto intermedio entre nuestro frontend y la API
pública de Apixu. Bueno, entramos a la página de
<a href="https://webtask.io">Webtask.io</a> y nos creamos un usuario <!-- -->(<!-- -->se lo pueden crear
con Github, Google, Facebook o Microsoft<!-- -->)<!-- -->, el proceso es simple y rápido y
luego seguramente te va a mandar a usar la CLI <!-- -->(<!-- -->Command Line Interface -
Interfaz de Línea de Comando<!-- -->)<!-- --> pero que eso no nos importe y vayamos al
<a href="https://webtask.io/make">editor que tiene integrado</a> que es mucho más lindo. Al
terminar lo que vamos a hacer nos quedaría que en nuestro Frontend haríamos la
petición de la data a un
<a href="https://blog.makeitreal.camp/que-es-un-api/#c%C3%B3mo-funciona-un-web-api">endpoint</a>
que creemos en Webtask, luego una función que escribamos en Webtask se encarga
de buscar la data en Apixu con nuestra API key guardada como secreto y nos
retorna el JSON al Frontend para que manipulemos esa data tranquilos. De esta
forma podemos trabajar sin exponer nuestra API key y nadie va a abusar de ella
😉</p><p>Una vez adentro del editor, vamos a crear un endpoint nuevo, hacemos click en la
barra izquierda, en el ícono que dice &quot;Create New&quot; <!-- -->(<!-- -->Crear uno nuevo<!-- -->)<!-- --> Función
de Webtask y podemos elegir comenzar con un template mejor <!-- -->(<!-- -->así escribimos un
poquito menos de código jaja<!-- -->)<!-- -->. Nos va a ofrecer distintos tipos de funciones,
nosotros con una Full HTTP Function vamos a estar bien. Al darle a Continuar nos
pide un nombre para el endpoint, esto es para tener una referencia para
nosotros, en este caso vamos a usar el nombre <code class="language-text">clima-apixu</code>, elijan el que más
les guste. Una vez creado, nos recibe el editor con este boilerplate:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<!-- -->  <!-- -->res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">&#x27;Content-Type&#x27;</span><span class="token punctuation">:</span> <span class="token string">&#x27;text/html&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<!-- -->  <!-- -->res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#x27;&lt;h1&gt;Hello, world!&lt;/h1&gt;&#x27;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div><p>Wow, y qué es todo eso? 🤪 Esto se parece un poco más a cómo sería código en
NodeJS, pero a no asustarse que hay que modificar un par de cosas y ya lo
sacamos andando ;) Vamos de a poco: <code class="language-text">module.exports</code> indica que de nuestro
módulo que creamos, vamos a exportar por defecto nuestra función. la cual recibe
por parámetros un contexto
<!-- -->(<a href="https://webtask.io/docs/context">documentación de contexto de Webtask</a>)<!-- --> que
básicamente va a tener datos del contexto de webtask donde estamos parados
<!-- -->(<!-- -->después vamos a ver bien para qué usamos el contexto<!-- -->)<!-- -->, req es un objeto donde
vamos a tener datos de la petición que recibimos del Frontend <!-- -->(<!-- -->tipo de petición
GET, POST, etc.<!-- -->)<!-- --> y res va a ser el objeto donde vamos a retornar los datos en
formato JSON una vez que los hayamos obtenido de Apixu.</p><p><a href="https://nodejs.org/en/docs/guides/anatomy-of-an-http-transaction/">Docu de NodeJS para leer más sobre transacciones HTTP (en inglés)</a></p><p>Empecemos por chequear qué tipo de petición nos estarían haciendo, nosotros
desde el Frontend vamos a hacer una petición de tipo <code class="language-text">GET</code> utilizando <code class="language-text">fetch()</code>
como ya hicimos. La información de la petición la encontramos en <code class="language-text">req.method</code>,
así que dentro de nuestra cloud function hacemos:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<!-- -->  <span class="token comment">// Cambiemos el tipo de contenido que vamos a retornar, que va a ser un JSON</span>
<!-- -->  <!-- -->res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">&#x27;Content-Type&#x27;</span><span class="token punctuation">:</span> <span class="token string">&#x27;application/json&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<!-- -->  <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">&#x27;GET&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<!-- -->    <span class="token comment">//Vamos a buscar la data a apixu y la retornamos en el objeto res</span>
<!-- -->    <!-- -->res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- -->  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><p>Bien, ahora tenemos que traernos la dirección de la API que nos la traemos del
Frontend y necesitamos una forma de traernos la data porque <code class="language-text">fetch()</code> no nos
sirve acá. Empecemos por tener la URL de la API a mano así después la usamos
para ir a buscar la data, en el renglón siguiente al <code class="language-text">res.writeHead</code> y afuera
del <code class="language-text">if</code> nos guardamos la URL de la petición a apixu en una constante:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> request_url <span class="token operator">=</span> <span class="token template-string"><span class="token string">`https://api.apixu.com/v1/forecast.json?key=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$<!-- -->{</span>
<!-- -->  <!-- -->process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">REACT_APP_API_KEY</span>
<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;q=Buenos+Aires&amp;days=6`</span></span></code></pre></div><p>Es la que teníamos en el Frontend, pero nuestra variable de entorno no nos va a
servir acá, lo que nos ofrece Webtask es tener variables como esa guardadas en
&quot;secreto&quot;, vamos a guardar nuestra API key ahí. Hacemos click en la llave <!-- -->(<!-- -->🔧<!-- -->)<!-- -->
que está arriba a la izquierda de nuestro editor de Webtask y seleccionamos
<code class="language-text">Secrets</code> del menú. Clickeamos en el botón <code class="language-text">Add Secret</code> y agregamos nuestra key,
como nombre de referencia vamos a usar <code class="language-text">API_KEY</code> y luego nuestra key la traemos
de nuestro archivo <code class="language-text">.env.development.local</code>, no se preocupen, va a estar a salvo
ahí adentro :) Y cómo usamos este secreto? Está en el contexto que recibimos en
la función y accedemos usando <code class="language-text">context.secrets</code>, entonces nuestra URL quedaría
de la siguiente manera:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> request_url <span class="token operator">=</span> <span class="token template-string"><span class="token string">`https://api.apixu.com/v1/forecast.json?key=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$<!-- -->{</span>
<!-- -->  <!-- -->context<span class="token punctuation">.</span>secrets<span class="token punctuation">.</span><span class="token constant">API_KEY</span>
<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;q=Buenos+Aires&amp;days=6`</span></span></code></pre></div><p>Buenísimo, ya tenemos la url para buscar la data y también nuestra API key a
salvo. Ahora tenemos que ir a buscar la data a nuestra <code class="language-text">request_url</code> y
retornarla en la respuesta, en el objeto <code class="language-text">res</code>. Para hacer esto tenemos un
paquete llamado <code class="language-text">request</code> que es bastante intuitivo y copado <!-- -->(<!-- -->en Webtask se
pueden instalar algunos paquetes de NPM<!-- -->)<!-- -->, empecemos por meter dentro de nuestro
<code class="language-text">if</code> lo que necesitamos utilizando <code class="language-text">request</code>:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">&#x27;GET&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<!-- -->  <!-- -->request<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>request_url<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> resp<span class="token punctuation">,</span> body<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<!-- -->    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<!-- -->      <!-- -->res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<!-- -->      <!-- -->res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- -->    <span class="token punctuation">}</span>
<!-- -->    <!-- -->res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span>
<!-- -->    <!-- -->res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<!-- -->  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div><p>Un momento, me dijiste que esto era simple Agustín! Bueno, parece complejo pero
yo creo que explicando cada parte se entiende bien lo que estamos haciendo: Con
<code class="language-text">request.get</code> vamos a ir a buscar a nuestra URL la data de apixu, luego esa data
que se consiga, se recibe en la función que está como segundo parámetro de
<code class="language-text">get</code>, en la cual tendremos en <code class="language-text">error</code> el tipo de error si llegase a haber
alguno <!-- -->(<!-- -->crucemos los deditos para que no 🤞<!-- -->)<!-- -->, en <code class="language-text">resp</code> tendremos otro objeto
de respuesta de esta función <!-- -->(<!-- -->nosotros necesitamos usar <code class="language-text">res</code> para retornar
directo al Frontend) y en <code class="language-text">body</code> vamos a tener la data que recibamos de hacer el
<code class="language-text">request.get</code> a la API de apixu, es decir, el JSON que ya obteníamos al hacer el
<code class="language-text">fetch()</code> en el Frontend. Luego chequeamos si hay un error, y si lo hay que
escriba en el objeto de respuesta ese error y lo finalice, lo cual causa que ya
recibamos una respuesta con el error en el Frontend. Luego si ese <code class="language-text">if</code> no se
cumple, sigue de largo y consideramos que no hubo error y escribimos el <code class="language-text">body</code>
con la data obtenida en el objeto de respuesta. En este momento se nos va a
quejar de que no está definido request, entonces importamos el paquete en la
parte superior de nuestro código, afuera del <code class="language-text">module.exports</code>:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> request <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;request&#x27;</span><span class="token punctuation">)</span></code></pre></div><p>Le damos guardar y si prestamos atención, del lado izquierdo de esta línea que
acabamos de agregar, aparece un signo + en un cuadradito azul, es el editor que
nos ofrece importar el paquete <code class="language-text">request</code> de forma fácil. Hacemos click y ya
tenemos nuestra cloud function lista!</p><div class="react-tabs" data-tabs="true"><ul class="react-tabs__tab-list" role="tablist"><li class="react-tabs__tab react-tabs__tab--selected" role="tab" id="react-tabs-24" aria-selected="true" aria-disabled="false" aria-controls="react-tabs-25" tabindex="0">Soluciones</li><li class="react-tabs__tab" role="tab" id="react-tabs-26" aria-selected="false" aria-disabled="false" aria-controls="react-tabs-27">Código completo de la Cloud Function</li></ul><div class="react-tabs__tab-panel react-tabs__tab-panel--selected" role="tabpanel" id="react-tabs-25" aria-labelledby="react-tabs-24">Para ver la solución de cada archivo hacé click en las pestañas 👆</div><div class="react-tabs__tab-panel" role="tabpanel" id="react-tabs-27" aria-labelledby="react-tabs-26"></div></div><p>Ahora nos falta conectar el Frontend a nuestro endpoint! Si vemos en la barra de
abajo de todo del editor de Webtask, vamos a ver un link y un botón para copiar
esa URL. El formato debería ser algo así:
<code class="language-text">https://wt-c8e20XXXXXXXXXXXXXXXXXXXXXXXa-0.sandbox.auth0-extend.com/clima</code>, la
copiamos y vamos al Frontend de nuestra app, donde hicimos el <code class="language-text">fetch()</code> y
pegamos la URL nueva adentro. Guardamos el archivo y si todo sale bien, debería
seguir todo funcionando, yay! 🎉</p><div class="react-tabs" data-tabs="true"><ul class="react-tabs__tab-list" role="tablist"><li class="react-tabs__tab react-tabs__tab--selected" role="tab" id="react-tabs-28" aria-selected="true" aria-disabled="false" aria-controls="react-tabs-29" tabindex="0">Soluciones</li><li class="react-tabs__tab" role="tab" id="react-tabs-30" aria-selected="false" aria-disabled="false" aria-controls="react-tabs-31">Cómo debería quedar nuestro fetch</li></ul><div class="react-tabs__tab-panel react-tabs__tab-panel--selected" role="tabpanel" id="react-tabs-29" aria-labelledby="react-tabs-28">Para ver la solución de cada archivo hacé click en las pestañas 👆</div><div class="react-tabs__tab-panel" role="tabpanel" id="react-tabs-31" aria-labelledby="react-tabs-30"></div></div><p>Ahora nos queda el último paso, subir nuestro proyecto a algún lado para poder
mostrarlo 😉</p><hr/><p><strong>Yapa:</strong> Si quieren que la cloud function les quede como una
<a href="https://juanda.gitbooks.io/webapps/content/api/arquitectura-api-rest.html">API REST</a>,
les dejo otro código que pueden usar para algún otro proyecto :)</p><div class="react-tabs" data-tabs="true"><ul class="react-tabs__tab-list" role="tablist"><li class="react-tabs__tab react-tabs__tab--selected" role="tab" id="react-tabs-32" aria-selected="true" aria-disabled="false" aria-controls="react-tabs-33" tabindex="0">Soluciones</li><li class="react-tabs__tab" role="tab" id="react-tabs-34" aria-selected="false" aria-disabled="false" aria-controls="react-tabs-35">Cloud Function como API REST</li></ul><div class="react-tabs__tab-panel react-tabs__tab-panel--selected" role="tabpanel" id="react-tabs-33" aria-labelledby="react-tabs-32">Para ver la solución de cada archivo hacé click en las pestañas 👆</div><div class="react-tabs__tab-panel" role="tabpanel" id="react-tabs-35" aria-labelledby="react-tabs-34"></div></div><hr/><h2>Subir nuestro proyecto a Netlify</h2><p>Bueno, como algunos habrán visto, casi todos mis slides y proyectos los tengo
subidos a <a href="https://www.netlify.com">Netlify</a>, es <!-- -->(<!-- -->más que<!-- -->)<!-- --> un hosting bastante
copado y facilita mucho el subir proyectos hechos por ejemplo con
<code class="language-text">create-react-app</code>. Tenemos dos formas de hacerlo:</p><ul><li>Vinculando nuestro Github</li><li>Sin vincular nuestro Github</li></ul><h3>Vinculando nuestro Github</h3><p>Si vinculamos nuestra cuenta de Github, después es tan simple como entrar a
nuestro usuario en Netlify y decirle cuál es el proyecto del que queremos que
haga el <code class="language-text">deploy</code>, pero para eso primero tenemos que subir nuestra app del clima
a un repo nuestro, no? Pequeño detalle 😜 Comencemos por entrar a nuestro
usuario de github, a la parte de repositorios y creemos uno nuevo con el botón
verde <strong>New</strong> que está a la derecha. Luego escribimos un nombre para nuestro
repositorio <!-- -->(<!-- -->por ejemplo &quot;ClimaApp&quot;<!-- -->)<!-- --> y no hace falta que pongamos descripción
ni que lo inicialicemos con un README. Vamos al botón de abajo de todo y
terminamos de crear nuestro repositorio. Se nos va a crear un repositorio vacío
y el mismo Github que es re copado nos va a decir cómo subir nuestro proyecto
donde dice <code class="language-text">…or push an existing repository from the command line</code>. Entonces
abrimos una terminal y vamos hasta la carpeta raíz de nuestra app, luego ahí
hacemos lo que nos dice Github:</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">git remote add origin https://github.com/agustinmulet/ClimaApp.git<!-- -->
<!-- -->git push -u origin master</code></pre></div><p>Es probable que nos pida nuestro usuario y constraseña de Github, en ese caso
ingresamos nuestras credenciales y si todo salió bien, ya tenemos nuestra app
subida a un repo propio!</p><p>Ahora resta hacer lo que dije antes, entrar con nuestro usuario a Netlify,
indicarle cuál es el repositorio con nuestra app <!-- -->(<!-- -->ClimaApp si le pusieron el
mismo nombre que yo<!-- -->)<!-- -->, esperamos un poco que haga el deploy y ya está! Lo que
sí, Netlify nos da un nombre raro para nuestro sitio, así que podemos ir a
<strong>Cambiando la URL</strong>.</p><h3>Sin vincular nuestro Github</h3><p>Si no te gusta andar vinculando tu Github con cualquier cosa, o si no usás o no
tenés Github, se puede subir nuestro proyecto igual ;)</p><p>Es simple, primero nos hacemos un usuario en Netlify e ingresamos. Netlify nos
recibe con un Dashboard y donde vemos un rectángulo con línea punteada que dice
<code class="language-text">Want to deploy a new site without connecting to Git? Drag and drop your site folder here</code>
tenemos que hacer drag and drop de nuestro proyecto ya preparado para
producción. Vamos entonces a preparar nuestro proyecto primero. Abrimos una
terminal y vamos a la carpeta raíz de nuestra app, ahí ejecutamos el comando
<code class="language-text">npm build</code>. Si no hubo problemas, deberíamos ver una carpeta nueva llamada
<code class="language-text">public</code> dentro de la carpeta de nuestra app. Ahora es tan simple como hacer
&#x27;drag and drop&#x27; <!-- -->(<!-- -->arrastrar y soltar<!-- -->)<!-- --> esta nueva carpeta <code class="language-text">public</code> que nos creó
este comando, esperamos que se suba todo et voilà! Ya deberíamos tener nuestra
app subida con un nombre extraño, podemos cambiarlo en la siguiente parte
<strong>Cambiando la URL</strong>.</p><h3>Cambiando la URL</h3><p>Para cambiar el nombre al que querramos <!-- -->(<!-- -->nombredeapp.netlify.com<!-- -->)<!-- -->, tenemos que
<!-- -->(<!-- -->si es que estamos en el Dashboard principal de Netlify<!-- -->)<!-- --> hacer click en
nuestra app recién subida con nombre raro, hacer click en el botón
<code class="language-text">⚙ Site Settings</code> y en la parte de <code class="language-text">Site Information</code> vamos a ver otro botón
<code class="language-text">Change site name</code>, donde podemos definir el nombre que querramos. Es probable
que algún nombre como ClimaApp esté utilizado, pero podemos inventar algo usando
nuestro nombre, o algún nombre raro que se les ocurra <!-- -->(<!-- -->climarino, weatherapp,
miappdelclima, loquesea jaja<!-- -->)<!-- -->.</p><p><strong>Listo!</strong> Espero que hayan disfrutado este workshop y cualquier cosa que les
parezca mejorable o que no esté claramente explicada, manden PR para poder hacer
un buen workshop de React desde cero y que más gente pueda aprender.</p><p>Además, si tienen ganas, pongan una foto en Twitter de su app funcionando, para
contagiar a que más personas lo hagan :) y pueden alterar el CSS, lo que
quieran!</p><h2>Cómo seguir desde acá?</h2><p>Ahora la idea es ir mejorando lo que tenemos, les tiro un par de ideas de cosas
que se pueden hacer:</p><ul><li>Mostrar más datos</li><li>Reacomodar cosas en el layout</li><li>Hacer nuestra app responsive</li><li>Agregar un input y buscar el clima en distintas ciudades</li></ul><p>Mil cosas más se pueden hacer, pero esas me parecen copadas. Y si te animás a
agregar el input para buscar en distintas ciudades, me gustaría verlo! 😄😄</p></div><div style="margin-top:40px;margin-left:-10px;margin-right:-10px" class="Framework__Flex-sc-1kcsy75-6 gxTZxC"><a class="NavButtons__NavButton-ii0ddk-1 spRJx" href="/reactworkshop/paso-02/"><span class="NavButtons__FadedText-ii0ddk-0 iQiGar">ATRAS</span> <!-- -->Workshop - Paso 2</a></div></div><footer class="Footer-sc-1xqajj9-0 crtzMT">© <!-- -->2019<!-- --> - MIT License</footer></main></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-132529584-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-pages-paso-03-mdx","jsonName":"paso-03-0f6","path":"/paso-03/"};window.dataPath="379/path---paso-03-0-f-6-386-AIqyXuZNkOp6VN5U0x8yW4Paqw";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-e0fd2abbc6654a1f5e94.js"],"component---src-pages-404-js":["/component---src-pages-404-js-2724e4abbec1827305cc.js"],"component---src-pages-index-mdx":["/component---src-pages-index-mdx-11cdddb2da42cd536c6e.js"],"component---src-pages-intro-mdx":["/component---src-pages-intro-mdx-fc7b18bbd62caaefab7f.js"],"component---src-pages-paso-02-mdx":["/component---src-pages-paso-02-mdx-29bc9d38940d4c6bc926.js"],"component---src-pages-paso-03-mdx":["/component---src-pages-paso-03-mdx-be1c7ecc40bd59a738ef.js"],"component---src-pages-props-y-state-mdx":["/component---src-pages-props-y-state-mdx-e70dca4efc386bd29516.js"],"component---src-pages-paso-01-mdx":["/component---src-pages-paso-01-mdx-2adf1096baacc5570fe5.js"],"pages-manifest":["/pages-manifest-2c2dfbad5aa713ebc1e6.js"]};/*]]>*/</script><script src="/reactworkshop/webpack-runtime-b4b73ca925a44438209f.js" async=""></script><script src="/reactworkshop/0-51220cff6843dcb47fe8.js" async=""></script><script src="/reactworkshop/app-e0fd2abbc6654a1f5e94.js" async=""></script><script src="/reactworkshop/component---src-pages-paso-03-mdx-be1c7ecc40bd59a738ef.js" async=""></script><script src="/reactworkshop/1-b1064bb1cb8701ea69d6.js" async=""></script></body></html>