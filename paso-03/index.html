<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/reactworkshop/styles.3c09133930ce096487b3.css">.react-tabs{-webkit-tap-highlight-color:transparent}.react-tabs__tab-list{border-bottom:1px solid #aaa;margin:0 0 10px;padding:0}.react-tabs__tab{display:inline-block;border:1px solid transparent;border-bottom:none;bottom:-1px;position:relative;list-style:none;padding:6px 12px;cursor:pointer}.react-tabs__tab--selected{background:#fff;border-color:#aaa;color:#000;border-radius:5px 5px 0 0}.react-tabs__tab--disabled{color:GrayText;cursor:default}.react-tabs__tab:focus{box-shadow:0 0 5px #0188fe;border-color:#0188fe;outline:none}.react-tabs__tab:focus:after{content:"";position:absolute;height:5px;left:-4px;right:-4px;bottom:-5px;background:#fff}.react-tabs__tab-panel{display:none}.react-tabs__tab-panel--selected{display:block}</style><meta name="generator" content="Gatsby 2.13.39"/><title data-react-helmet="true">Workshop - Paso 3 | React Workshop</title><meta data-react-helmet="true" name="description" content="Workshop de React para aprender las bases realizando una app del clima."/><meta data-react-helmet="true" property="og:title" content="Workshop - Paso 3"/><meta data-react-helmet="true" property="og:description" content="Workshop de React para aprender las bases realizando una app del clima."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@agustinmulet"/><meta data-react-helmet="true" name="twitter:title" content="Workshop - Paso 3"/><meta data-react-helmet="true" name="twitter:description" content="Workshop de React para aprender las bases realizando una app del clima."/><link rel="shortcut icon" href="/reactworkshop/icons/icon-48x48.png?v=4c0440e7f64d9dca106a8bf23ba03f9d"/><link rel="manifest" href="/reactworkshop/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/reactworkshop/icons/icon-48x48.png?v=4c0440e7f64d9dca106a8bf23ba03f9d"/><link rel="apple-touch-icon" sizes="72x72" href="/reactworkshop/icons/icon-72x72.png?v=4c0440e7f64d9dca106a8bf23ba03f9d"/><link rel="apple-touch-icon" sizes="96x96" href="/reactworkshop/icons/icon-96x96.png?v=4c0440e7f64d9dca106a8bf23ba03f9d"/><link rel="apple-touch-icon" sizes="144x144" href="/reactworkshop/icons/icon-144x144.png?v=4c0440e7f64d9dca106a8bf23ba03f9d"/><link rel="apple-touch-icon" sizes="192x192" href="/reactworkshop/icons/icon-192x192.png?v=4c0440e7f64d9dca106a8bf23ba03f9d"/><link rel="apple-touch-icon" sizes="256x256" href="/reactworkshop/icons/icon-256x256.png?v=4c0440e7f64d9dca106a8bf23ba03f9d"/><link rel="apple-touch-icon" sizes="384x384" href="/reactworkshop/icons/icon-384x384.png?v=4c0440e7f64d9dca106a8bf23ba03f9d"/><link rel="apple-touch-icon" sizes="512x512" href="/reactworkshop/icons/icon-512x512.png?v=4c0440e7f64d9dca106a8bf23ba03f9d"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><style data-styled="WXxWL btnaKj kziUgX dEQjWb cySOYw rPADO dJzbvK gWbzFN kkhQBH dVLbtd kBAxEJ edxkLf gxTZxC ezkzzD spRJx iQiGar crtzMT" data-styled-version="4.3.2">
/* sc-component-id: Framework__Container-sc-1kcsy75-1 */
.gWbzFN{position:relative;max-width:940px;padding:0 5%;margin:0 auto;} @media (min-width:576px){.gWbzFN{padding:0 25px;}} @media (min-width:768px){.gWbzFN{padding:0 40px;}} @media (min-width:992px){.gWbzFN{padding:0 50px;}}
/* sc-component-id: Framework__Link-sc-1kcsy75-4 */
.cySOYw{color:inherit;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.15s;transition:color 0.15s;}
/* sc-component-id: Framework__Flex-sc-1kcsy75-6 */
.edxkLf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;} .edxkLf > div{margin-right:15px;margin-bottom:15px;}.gxTZxC{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;} .gxTZxC > div{margin-right:15px;margin-bottom:15px;}
/* sc-component-id: Nav__Navbar-sc-1ofyja1-0 */
.WXxWL{display:none;position:fixed;top:0;bottom:0;width:250px;border-right:1px solid rgba(0,16,64,0.08);background-clip:padding-box;padding:16px 0;background:#346ca4;color:white;overflow-y:auto;z-index:1;-webkit-transform:translate3d(-100%,0,0);-ms-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);-webkit-transition:-webkit-transform 0.3s,visibility 0.2s;-webkit-transition:transform 0.3s,visibility 0.2s;transition:transform 0.3s,visibility 0.2s;-webkit-transition-timing-function:cubic-bezier(.77,0,.175,1);transition-timing-function:cubic-bezier(.77,0,.175,1);visibility:hidden;} @media (min-width:992px){.WXxWL{display:block;visibility:visible;-webkit-transform:none;-ms-transform:none;transform:none;}}
/* sc-component-id: Nav__List-sc-1ofyja1-1 */
.kziUgX{list-style:none;padding-left:0;margin:0;}
/* sc-component-id: Nav__ListItem-sc-1ofyja1-2 */
.dEQjWb{margin:0;} .dEQjWb:not(:last-child){border-bottom:1px dotted rgba(0,16,64,0.1);} .dEQjWb > a{display:block;padding:12px 25px;} .dEQjWb > a:hover{border-bottom-color:transparent;}
/* sc-component-id: Nav__XButton-sc-1ofyja1-3 */
.btnaKj{position:absolute;right:10px;background:none;border:none;color:inherit;padding:0;} @media (min-width:992px){.btnaKj{display:none;}}
/* sc-component-id: NavButtons__FadedText-ii0ddk-0 */
.iQiGar{position:relative;top:-2px;opacity:0.4;font-size:70%;margin-right:10px;font-weight:bold;display:block;} @media (min-width:768px){.iQiGar{display:inline;}}
/* sc-component-id: NavButtons__NavButton-ii0ddk-1 */
.spRJx{display:block;padding:40px 25px;border:1px solid rgba(0,16,64,0.15);border-radius:4px;background:white;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-weight:bold;-webkit-transition:box-shadow 0.2s;transition:box-shadow 0.2s;-webkit-flex:1;-ms-flex:1;flex:1;margin:0 10px;max-width:500px;font-size:20px;-webkit-transition:all 0.1s;transition:all 0.1s;} .spRJx:hover{border-color:inherit;} @media (min-width:768px){.spRJx{font-size:24px;}}
/* sc-component-id: Header__HeaderRoot-sc-9eu2yh-0 */
.dJzbvK{position:relative;background:linear-gradient(91deg,#f1eefc,#9dc6ff 70%,#a5bcff);padding:25px 0 5px 0;text-align:center;margin-bottom:50px;}
/* sc-component-id: Header__Logo-sc-9eu2yh-1 */
.dVLbtd{height:60px;margin:0px;}
/* sc-component-id: Header__Title-sc-9eu2yh-2 */
.kBAxEJ{font-size:48px;font-weight:600;margin-top:0;margin-bottom:8px;}
/* sc-component-id: Header__ButtonLink-sc-9eu2yh-3 */
.ezkzzD{color:inherit;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.15s;transition:color 0.15s;background:rgba(255,255,255,0.2);border:1px solid rgba(255,255,255,0.4);padding:12px 24px;border-radius:4px;-webkit-transition:all 0.15s;transition:all 0.15s;color:#4574c0;margin:0 10px 10px;font-weight:500;position:absolute;right:0px;top:0px;} .ezkzzD:hover{color:#2263e5;} .ezkzzD:hover{background:white;border-bottom-color:white;box-shadow:0 8px 16px -2px rgba(0,32,128,0.25);}
/* sc-component-id: Header__MenuButton-sc-9eu2yh-4 */
.kkhQBH{position:absolute;top:-10px;left:15px;color:inherit;font-weight:bold;border:none;background:none;text-transform:uppercase;border-radius:4px;padding:0;} @media (min-width:992px){.kkhQBH{display:none;}}
/* sc-component-id: Main-sc-7otpyo-0 */
@media (min-width:992px){.rPADO{margin-left:250px;}}
/* sc-component-id: Footer-sc-1xqajj9-0 */
.crtzMT{text-align:center;padding:25px 0;border-top:1px solid rgba(0,16,64,0.08);margin-top:50px;color:#9dacb6;font-size:85%;background:white;}
/* sc-component-id: sc-global-4133547688 */
html{box-sizing:border-box;height:100%;} *,*::after,*::before{box-sizing:inherit;} body{font-family:'Nunito Sans',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;margin:0;color:#324b64;height:100%;font-size:17px;-webkit-tap-highlight-color:transparent;} :focus:not(.focus-visible){outline:0;} ::-moz-selection{background:#21B7EC;color:white;} ::selection{background:#21B7EC;color:white;} a{color:#0065d5;-webkit-text-decoration:none;text-decoration:none;border-bottom:1px solid transparent;-webkit-transition:border-bottom-color 0.15s;transition:border-bottom-color 0.15s;} a:hover{border-bottom-color:inherit;} h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:1rem;} h1 > a,h2 > a,h3 > a,h4 > a,h5 > a,h6 > a{color:inherit;padding-bottom:0.25rem;} h1{font-size:2.488rem;margin-top:2.488rem;} h2{font-size:2.074rem;margin-top:2.074rem;border-bottom:1px solid rgba(0,32,128,0.1);padding-bottom:10px;margin-bottom:1.5rem;} h3{font-size:1.728rem;margin-top:1.728rem;} h4{font-size:1.44rem;margin-top:1.5rem;} h5{font-size:1.2rem;} p,li{line-height:1.6;margin-top:0.5rem;} table{box-shadow:0 0 0 1px rgba(0,32,128,0.1);border-collapse:collapse;margin:0;padding:0;width:100%;line-height:1.4;border-radius:0 0 10px 10px;} table tr{padding:5px;} table tr:not(:last-child){border-bottom:1px dotted rgba(0,32,128,0.1);} td:first-child code{background:none;font-size:90%;color:inherit;padding:0;} table th,table td{padding:16px;text-align:left;} table th{position:relative;z-index:1;font-size:14px;text-transform:uppercase;background:#eeeefa;position:-webkit-sticky;position:sticky;top:0;} @media (max-width:1150px){table{border:0;box-shadow:none;}table thead{display:none;}table tr{border:1px solid rgba(0,32,128,0.1);display:block;margin-bottom:10px;border-radius:10px;}table td{display:block;}table td:not(:last-child){border-bottom:1px dotted rgba(0,32,128,0.1);}table td:last-child{border-bottom:0;}table td::before{content:attr(data-label);display:block;font-weight:bold;text-transform:uppercase;opacity:0.7;font-size:13px;margin-bottom:5px;}td:first-child code{font-size:100%;}} hr{border:none;border-top:1px solid rgba(0,16,64,0.15);margin-top:5px;} .react-tabs{padding:14px;box-shadow:0.055rem 0.055rem 1.11rem rgba(20,20,20,0.27);margin-bottom:24px;}
/* sc-component-id: sc-global-3887041591 */
code,pre{font-family:Menlo,Consolas,'Liberation Mono',Courier,monospace;} code[class*='language-'],pre[class*='language-']{color:#cee6ff;background:none;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:2.25;font-size:90%;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;} pre[class*='language-']{padding:16px 5%;margin-top:0;margin-left:-5.55%;margin-right:-5.55%;background:#22223f;font-size:15px;line-height:2;max-height:650px;overflow:auto;-webkit-overflow-scrolling:touch;} pre[class*='language-'] [data-elastic-wrapper]{display:inline-block;} @media (min-width:576px){pre[class*='language-']{margin-left:-25px;margin-right:-25px;padding:16px 25px;}} @media (min-width:768px){pre[class*='language-']{border-radius:8px;margin-left:0;margin-right:0;padding:16px 24px;font-size:16px;}} code.language-text{background:linear-gradient(90deg,#f3edff,#edf5ff);color:#2569d7;font-weight:bold;padding:0.2em 0.4em;border-radius:4px;font-size:85%;line-height:inherit;} .token.important,.token.atrule,.token.keyword{color:#bc90ff;} .token.comment,.token.prolog,.token.doctype,.token.cdata{color:#7692d9;} .token.attr-name,.token.selector{color:#ffb07b;} .token.boolean{color:#ff81d0;} .token.punctuation,.token.operator,.token.op,.token.module{color:#6ed3ff;} .token.nil{color:#9b9fb0;} .token.arrow{color:#c49dff;} .token.parameter{color:#ffc5ff;} .token.flow{color:#e99eff;font-style:italic;} .token.spread{font-weight:bold;color:#ff7e99;text-shadow:0px 1px 6px;} .namespace{opacity:0.7;} .token.tag{color:#ff6c8b;} .token.number,.token.symbol,.token.deleted{color:#ff984b;} .token.string,.language-css .token.string,.token.url,.token.attr-value,.token.char,.token.builtin,.token.inserted{color:#4ef2d0;} .token.entity,.style .token.string{color:#ecd6ba;text-shadow:0 1px 3px transparentize(#ecd6ba,0.5);} .token.function,.token.property{color:#61a5ff;} .token.method{color:#16c5ff;} .token.variable{color:#ffad92;} .token.dom,.token.class-name{color:#ffd278;} .token.property.definition{color:#b6e992;} .token.property.access{color:#8ec1ef;} .token.regex{color:#88ecff;} .token.bold{font-weight:bold;} .token.italic{font-style:italic;} .token.entity{cursor:help;}</style><link href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,600,700" rel="stylesheet"/><link as="script" rel="preload" href="/reactworkshop/component---src-pages-paso-03-mdx-3937ae9304614ce7b04a.js"/><link as="script" rel="preload" href="/reactworkshop/0-394feb47c8c326922c24.js"/><link as="script" rel="preload" href="/reactworkshop/app-c71f336bd488eeb20bee.js"/><link as="script" rel="preload" href="/reactworkshop/styles-0bd6d4fbf924558e0660.js"/><link as="script" rel="preload" href="/reactworkshop/webpack-runtime-32f91844be39694fd2dd.js"/><link as="fetch" rel="preload" href="/reactworkshop/page-data\paso-03\page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><nav tabindex="-1" aria-label="Menu" style="transition:" class="Nav__Navbar-sc-1ofyja1-0 WXxWL"><div data-elastic-wrapper="true"><button aria-label="Close Menu" class="Nav__XButton-sc-1ofyja1-3 btnaKj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:36px;height:36px"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button><ul class="Nav__List-sc-1ofyja1-1 kziUgX"><li class="Nav__ListItem-sc-1ofyja1-2 dEQjWb"><a class="Framework__Link-sc-1kcsy75-4 cySOYw" href="/reactworkshop/">Index</a></li><li class="Nav__ListItem-sc-1ofyja1-2 dEQjWb"><a class="Framework__Link-sc-1kcsy75-4 cySOYw" href="/reactworkshop/intro">Introducción</a></li><li class="Nav__ListItem-sc-1ofyja1-2 dEQjWb"><a class="Framework__Link-sc-1kcsy75-4 cySOYw" href="/reactworkshop/props-y-state/">Props y State</a></li><li class="Nav__ListItem-sc-1ofyja1-2 dEQjWb"><a class="Framework__Link-sc-1kcsy75-4 cySOYw" href="/reactworkshop/paso-01/">Workshop - Paso 1</a></li><li class="Nav__ListItem-sc-1ofyja1-2 dEQjWb"><a class="Framework__Link-sc-1kcsy75-4 cySOYw" href="/reactworkshop/paso-02/">Workshop - Paso 2</a></li><li class="Nav__ListItem-sc-1ofyja1-2 dEQjWb"><a aria-current="page" class="Framework__Link-sc-1kcsy75-4 cySOYw" style="font-weight:bold;background:linear-gradient(90deg, #9dc6ff , #346CA4);color:#324B6D" href="/reactworkshop/paso-03/">Workshop - Paso 3</a></li></ul></div></nav><main class="Main-sc-7otpyo-0 rPADO"><header class="Header__HeaderRoot-sc-9eu2yh-0 dJzbvK"><div class="Framework__Container-sc-1kcsy75-1 gWbzFN"><button aria-label="Menu" class="Header__MenuButton-sc-9eu2yh-4 kkhQBH"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:36px;height:36px"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button><img src="/reactworkshop/static/react-84d44aff3af7aab4ce4495c3de9c2e64.png" draggable="false" class="Header__Logo-sc-9eu2yh-1 dVLbtd"/><h1 class="Header__Title-sc-9eu2yh-2 kBAxEJ">React Workshop</h1><div class="Framework__Flex-sc-1kcsy75-6 edxkLf"><a target="_blank" rel="noopener noreferrer" href="https://github.com/agustinmulet/reactworkshop" class="Framework__ExternalLink-sc-1kcsy75-5 Header__ButtonLink-sc-9eu2yh-3 ezkzzD"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:-6px;margin-right:10px;color:#333"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>Github</a></div></div></header><div class="Framework__Container-sc-1kcsy75-1 gWbzFN"><h2>Workshop - Paso 3</h2><h2>Usando Netlify para nuestro proyecto</h2><p>Bueno, como algunos habrán visto, casi todos mis slides y proyectos los tengo
subidos a <a href="https://www.netlify.com">Netlify</a>, es <!-- -->(<!-- -->más que<!-- -->)<!-- --> un hosting bastante
copado y facilita mucho el subir proyectos hechos por ejemplo con <code class="language-text">create-react-app</code>.
También tienen algo que se llama Netlify CLI (Command Line Interface) y Netlify Functions.
Es decir, vamos a usar varias cosas del paquete de Netlify 😎</p><p>Antes que nada, vamos a usar una <a href="https://www.netlify.com/docs/functions/">lambda function <!-- -->(<!-- -->en inglés<!-- -->)</a>
para mantener a salvo nuestra API key que tenemos en nuestro archivo <code class="language-text">.env.development.local</code>!
Para los que hicieron la versión anterior de este workshop, es parecido a lo que hacíamos antes,
pero los amigotes de webtask parece que no aceptan nuevos registros... 🙄 <!-- -->(<!-- -->Gracias <a href="https://twitter.com/ivanmeyer_">Iván Meyer</a>
por avisarme<!-- -->)</p><p>Empecemos por crear una carpeta en la raíz de nuestro proyecto que se llame <code class="language-text">functions</code>, debería quedar
a la misma altura que nuestro <code class="language-text">package.json</code> y demás carpetas. Dentro de esa carpeta creamos un archivo
con extensión js cuyo nombre va a definir la url después a donde tengamos que hacer nuestro <code class="language-text">fetch</code>,
por ejemplo le ponemos de nombre <code class="language-text">getWeather.js</code>.</p><p>Ahora todo lo que tengamos ahí adentro de nuestra <em>lambda function</em> va a funcionar como un estilo
de backend para nosotros. Lo que vamos a hacer básicamente para pedir la data del clima sería algo así:</p><p><code class="language-text">Frontend usando fetch -&gt; Lambda Function usando request -&gt; Apixu</code></p><p>Explicado en palabras, desde nuestro frontend usando <code class="language-text">fetch</code>, hacemos una petición a una URL que apunta
a nuestra Lambda Function, desde la cual usando <code class="language-text">request</code> hacemos la petición a Apixu. Luego la data
fluye al revés con la respuesta de lo que nos retorne el servicio de Apixu.
Si todavía no se entiende (es muy probable, porque no explico muy bien 😅),
<a href="https://blog.makeitreal.camp/que-es-un-api/#c%C3%B3mo-funciona-un-web-api">este link</a> puede ser de gran ayuda.</p><p>Una vez adentro del archivo <code class="language-text">getWeather.js</code>, vamos a crear un endpoint nuevo, el cual debe quedar así:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">exports<span class="token punctuation">.</span><span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> context<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//Acá va nuestro código</span>
<span class="token punctuation">}</span></code></pre></div><p>Wow, y qué es eso? 🤪 Esto se parece un poco más a cómo sería código en
NodeJS <!-- -->(<!-- -->un poco nomás<!-- -->)<!-- -->, pero a no asustarse que hay que modificar un par de cosas y ya lo
sacamos andando 😉 Vamos de a poco: <code class="language-text">exports.handler</code> representa nuestra función y es el punto
de entrada cuando hagan una petición a nuestro endpoint, la cual recibe
por parámetros un evento, un contexto y un<!-- -->(<!-- -->a<!-- -->)<!-- --> callback. Donde <strong>event</strong> es un objeto donde
vamos a tener datos de la petición que recibimos del Frontend <!-- -->(<!-- -->tipo de petición HTTP, ya sea
GET, POST, etc., datos recibidos del Frontend si es una petición POST; digamos que es donde pasa toda la magia<!-- -->)<!-- -->,
<strong>context</strong> pensé que iba a tener un contexto desde dónde se hacía la petición o algo así pero parece que no,
entonces no le encuentro mucha utilidad 🤷‍♂️ y <strong>callback</strong> es una función que utilizamos para retornar
data procesada al frontend o avisamos que hubo un error.</p><ul><li><a href="https://docs.aws.amazon.com/es_es/lambda/latest/dg/nodejs-prog-model-handler.html">Docu de Lambda Functions de AWS (son las que usamos con Netlify)</a></li><li><a href="https://nodejs.org/en/docs/guides/anatomy-of-an-http-transaction/">Docu de NodeJS para leer más sobre transacciones HTTP (en inglés)</a></li></ul><p>Empecemos por chequear qué tipo de petición nos estarían haciendo, nosotros
desde el Frontend vamos a hacer una petición de tipo <code class="language-text">GET</code> utilizando <code class="language-text">fetch()</code>
como ya hicimos. La información de la petición la encontramos en <code class="language-text">event.httpMethod</code>,
así que dentro de nuestra función hacemos:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">exports<span class="token punctuation">.</span><span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> context<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//Chequeamos el tipo de petición HTTP, puede ser GET, POST...</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>httpMethod <span class="token operator">===</span> <span class="token string">&#x27;GET&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//Acá tenemos que buscar la data a apixu y retornarla en el </span>
    <span class="token comment">//body de un objeto usando la función callback</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><p>Bien, ahora tenemos que traernos la dirección de la API que nos la traemos del
Frontend y necesitamos una forma de traernos la data porque <code class="language-text">fetch()</code> no nos
sirve acá <!-- -->(<!-- -->en el &quot;backend&quot;<!-- -->)<!-- -->. Empecemos por tener la URL de la API a mano así después la usamos
para ir a buscar la data, en el renglón siguiente al <code class="language-text">exports.handler</code> y afuera
del <code class="language-text">if</code> nos guardamos la URL de la petición a apixu en una constante:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> request_url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://api.apixu.com/v1/forecast.json?key=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
  process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">REACT_APP_API_KEY</span>
<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;q=Buenos+Aires&amp;days=6</span><span class="token template-punctuation string">`</span></span></code></pre></div><p>Por el momento vamos a dejar así como está la constante ya que la vamos a configurar
más adelante de forma súper fácil 😉</p><p>Buenísimo, ya tenemos la URL para buscar la data y sabemos que nuestra API key va a
estar a salvo. Ahora tenemos que ir a buscar la data a nuestra <code class="language-text">request_url</code> y
retornarla en la respuesta de la función <code class="language-text">callback</code>. Para hacer esto tenemos un
paquete llamado <code class="language-text">request</code> que es bastante intuitivo y copado, vamos a agregarlo
a nuestro proyecto y luego lo incorporamos en la Lambda Function.</p><p>En la terminal, en la raíz de nuestro proyecto corremos el siguiente comando:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> request --save</code></pre></div><p>Y una vez que se instala ya podemos usarlo en <code class="language-text">getWeather.js</code>, primero lo importamos <!-- -->(<!-- -->afuera
de <code class="language-text">exports.handler</code>, arriba de todo<!-- -->)<!-- -->:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;request&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p>Un momento, que importar no se hace con <code class="language-text">import</code>? No me mientas, Agustin! 🤬
Bueno, no, no les miento 😅 como dijimos que esto funcionaría como un backend, así es
como se importan paquetes en NodeJS por ejemplo.</p><p>Ahora que ya lo tenemos importado, vamos a usarlo! Agregamos esto adentro de nuestro <code class="language-text">if</code>:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>httpMethod <span class="token operator">===</span> <span class="token string">&#x27;GET&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>request_url<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> res<span class="token punctuation">,</span> body</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        statusCode<span class="token punctuation">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
        body<span class="token punctuation">:</span> error
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        statusCode<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
        body<span class="token punctuation">:</span> body
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div><p>Pero esto cada vez se complica más! 🤬🤬🤬 Bueno, parece complejo pero
yo creo que explicando cada parte se entiende bien lo que estamos haciendo: Con
<code class="language-text">request.get</code> vamos a ir a buscar a nuestra URL la data de apixu, luego esa data
que se consiga, se recibe en la función que está como segundo parámetro de
<code class="language-text">get</code>, en la cual tendremos en <code class="language-text">error</code> el objeto de error si llegase a haber
alguno <!-- -->(<!-- -->crucemos los deditos para que no 🤞<!-- -->)<!-- -->, en <code class="language-text">res</code> tendremos otro objeto
de respuesta de esta función y en <code class="language-text">body</code> vamos a tener la data que recibamos de hacer el
<code class="language-text">request.get</code> a la API de apixu, es decir, el JSON que antes obteníamos al hacer el
<code class="language-text">fetch()</code> en el Frontend. Luego chequeamos si hay un error, y si lo hay retornamos
en la función <code class="language-text">callback</code> dos parámetros: el primero se utiliza para informar errores,
pero vamos a enviar <code class="language-text">null</code> para luego poder enviar al Frontend un objeto <!-- -->(<!-- -->como segundo parámetro<!-- -->)<!-- -->
informando el código de estado 500 <!-- -->(<!-- -->código de error<!-- -->)<!-- --> y un <code class="language-text">body</code> con los detalles del error.
Lo mismo hacemos después, en el caso que no haya habido fallo, informamos un código de estado 200
<!-- -->(<!-- -->todo ok ✅<!-- -->)<!-- --> y en <code class="language-text">body</code> mandamos lo que nos retorna el resultado de la API de Apixu.</p><p>Con esto podríamos decir que ya estaría hecha la <em>Lambda Function</em> de manera básica para hacer
lo que necesitamos: No exponer nuestra API key y que nos busque la data que necesitamos.
Nos debería haber quedado algo así:</p><div class="react-tabs" data-tabs="true"><ul class="react-tabs__tab-list" role="tablist"><li class="react-tabs__tab" role="tab" aria-selected="false" aria-disabled="false">Soluciones</li><li class="react-tabs__tab" role="tab" aria-selected="false" aria-disabled="false">getWeather.js</li></ul><div class="react-tabs__tab-panel" role="tabpanel"></div><div class="react-tabs__tab-panel" role="tabpanel"></div></div><p>Ahora nos falta conectar el Frontend a nuestro endpoint! Esto nos lo simplifica
bastante Netlify, nuestra función va a estar en:
<code class="language-text">/.netlify/functions/NOMBRE_DE_FUNCION</code>, en nuestro caso va a ser <code class="language-text">/.netlify/functions/getWeather</code>.
Copiamos el texto y vamos al Frontend de nuestra app, donde hicimos el <code class="language-text">fetch()</code> y
pegamos la URL nueva adentro. Guardamos el archivo y seguimos, vamos a probar si todo funciona!</p><div class="react-tabs" data-tabs="true"><ul class="react-tabs__tab-list" role="tablist"><li class="react-tabs__tab" role="tab" aria-selected="false" aria-disabled="false">Soluciones</li><li class="react-tabs__tab" role="tab" aria-selected="false" aria-disabled="false">Cómo debería quedar nuestro fetch</li></ul><div class="react-tabs__tab-panel" role="tabpanel"></div><div class="react-tabs__tab-panel" role="tabpanel"></div></div><h2>Haciendo deploy de nuestra app</h2><p>Antes que nada, al haber hecho nuestra función, debemos indicarle a Netlify en qué
carpeta de nuestro proyecto tiene que buscarla, así que creamos un archivo en la
raíz de nuestro proyecto y le ponemos de nombre <code class="language-text">netlify.toml</code>, adentro escribimos
lo siguiente:</p><div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">[</span>build<span class="token punctuation">]</span>
  functions <span class="token operator">=</span> <span class="token string">&quot;./functions&quot;</span></code></pre></div><p>Como sé que hay personas que no confían en los permisos de third parties sobre código
de Github, vamos a ver dos formas de hacerlo:</p><ul><li><a href="#vinculando-nuestro-github">Vinculando nuestro Github</a></li><li><a href="#sin-vincular-nuestro-github">Sin vincular nuestro Github</a></li></ul><h3>Vinculando nuestro Github</h3><p>Si vinculamos nuestra cuenta de <a href="https://www.github.com">Github</a>, para subir nuestro
proyecto es tan simple como entrar a nuestro usuario en Netlify y decirle cuál es el
proyecto del que queremos que haga el <code class="language-text">deploy</code>, pero para eso primero tenemos que subir
nuestra app del clima a un repo nuestro, no? Pequeño detalle 😜 Comencemos por entrar a nuestro
usuario de Github, a la parte de repositorios y creemos uno nuevo con el botón
verde <strong>New</strong> que está a la derecha, o <a href="https://www.github.com/new">entrando en este link</a>.
Luego escribimos un nombre para nuestro repositorio <!-- -->(<!-- -->por ejemplo &quot;ClimaApp&quot;<!-- -->)<!-- --> y no hace
falta que pongamos descripción ni que lo inicialicemos con un README. Vamos al botón de abajo
de todo y terminamos de crear nuestro repositorio. Se nos va a crear un repositorio vacío
y el mismo Github que es re copado nos va a decir cómo subir nuestro proyecto
donde dice <code class="language-text">…or push an existing repository from the command line</code>. Entonces
abrimos una terminal y vamos hasta la carpeta raíz de nuestra app, luego ahí
hacemos lo que nos dice Github:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">git</span> remote <span class="token function">add</span> origin https://github.com/agustinmulet/ClimaApp.git
<span class="token function">git</span> push -u origin master</code></pre></div><p>Es probable que nos pida nuestro usuario y constraseña de Github, en ese caso
ingresamos nuestras credenciales y si todo salió bien, ya tenemos nuestra app
subida a un repo propio!</p><p>Ahora resta hacer lo que dije antes, entrar con nuestro usuario a Netlify,
hacer click en el botón verde de arriba a la derecha que dice <strong>New site from Git</strong> e
indicarle cuál es el repositorio con nuestra app <!-- -->(<!-- -->ClimaApp si le pusieron el
mismo nombre que yo<!-- -->)<!-- -->, esperamos un poco que haga el deploy y ya <!-- -->(<!-- -->casi<!-- -->)<!-- --> está! Lo que
sí, Netlify nos da un nombre raro para nuestro sitio, así que podemos ir a
<a href="#cambiando-la-url"><strong>Cambiando la URL</strong></a>.</p><h3>Sin vincular nuestro Github</h3><p>Si no te gusta andar vinculando tu Github con cualquier cosa, o si no usás o no
tenés Github, no te preocupes, se puede subir nuestro proyecto igual 😊</p><p>Empecemos por instalarnos la CLI de Netlify de forma global, en la terminal corremos:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> i -g netlify-cli</code></pre></div><p>Y luego nos hacemos cuenta en <a href="https://www.netlify.com">Netlify</a> y logueamos con nuestra cuenta de
Netlify <!-- -->(<!-- -->en la terminal<!-- -->)<!-- -->:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">netlify login</code></pre></div><p>Para hacer el deploy, necesitamos nuestra app lista para producción, la generamos
corriendo el siguiente comando: </p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> run build</code></pre></div><p>Y vamos a ver que se crea una carpeta <code class="language-text">build</code> con nuestra app lista para hacer el
deploy, pero usamos la CLI para hacer esto así se sube la función que hicimos y
dejamos que Netlify haga un poquito de su magia. </p><p>⚠️ Niñas y niños, no intenten esto en sus casas ⚠️ 🤣🤣</p><p>Vamos entonces con el deploy a producción, en la terminal:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">netlify deploy --prod</code></pre></div><p>Esto nos va a indicar que no tenemos nuestro proyecto vinculado a ningún sitio
existente en Netlify, pero nosotros queremos hacer uno nuevo, así que con las
flechitas seleccionamos <code class="language-text">Create &amp; configure a new site</code> y luego nos pregunta un
nombre para nuestro sitio <!-- -->(<!-- -->podemos hacerlo ahora o luego en <a href="#cambiando-la-url"><strong>Cambiando la URL</strong></a>)<!-- -->.
Lo siguiente que consulta es en qué &quot;Team&quot; queremos agregar nuestro proyecto, si
no les pregunta esto seguramente les pida usuario y contraseña porque no se loguearon
antes, no pasa nada.</p><p>Luego crea nuestro sitio, nos informa URL de Admin, URL donde va a estar alojada
nuestra app y un ID de sitio <!-- -->(<!-- -->el cual va a estar en un archivo <code class="language-text">/.netlify/state.json</code> de
configuración en nuestro proyecto<!-- -->)<!-- --> y nos pide luego el path donde está nuestra app
preparada para hacer deploy, que es la carpeta <code class="language-text">build</code> que generamos antes, entonces
escribimos <strong>build</strong> y apretamos enter y ya <!-- -->(<!-- -->casi<!-- -->)<!-- --> está! Si no pudimos generar
la url que queríamos o queremos cambiarla, en la siguiente sección podremos hacerlo.</p><h3>Cambiando la URL</h3><p>Para cambiar el nombre al que querramos <!-- -->(<!-- -->nombredeapp.netlify.com<!-- -->)<!-- -->, tenemos que
<!-- -->(<!-- -->si es que estamos en el Dashboard principal de Netlify<!-- -->)<!-- --> hacer click en
nuestra app recién subida con nombre raro, hacer click en el botón
<code class="language-text">⚙ Site Settings</code> y en la parte de <code class="language-text">Site Information</code> vamos a ver otro botón
<code class="language-text">Change site name</code>, donde podemos definir el nombre que querramos. Es probable
que algún nombre como ClimaApp esté utilizado, pero podemos inventar algo usando
nuestro nombre, o algún nombre raro que se les ocurra <!-- -->(<!-- -->climarino, weatherapp,
miappdelclima, loquesea jaja<!-- -->)<!-- -->.</p><h3>Agregando nuestra variable de entorno el proyecto</h3><p>Lo último que tenemos que hacer para que nuestra app funcione bien!
Hayas elegido vincular con Github o no, la verdad que esta es la única forma que
encontré que realmente funciona para crear variables de entorno, porque supuestamente
al agregarla en el archivo <code class="language-text">netlify.toml</code> se puede probar todo de manera local
usando Netlify Dev, pero al estar en Beta parece que faltan ajustar algunos tornillos. <!-- -->(<!-- -->O soy
yo que no tengo idea de cómo usarlo bien, si alguien sabe que me avise <a href="https://twitter.com/AgustinDMulet"><strong>este es mi Twitter</strong></a>)</p><p>Bueno basta de cháchara, la variable! Para esto vamos a <code class="language-text">⚙ Site Settings</code> de nuestro proyecto y
ahí dentro a <code class="language-text">Build &amp; deploy</code>, <code class="language-text">Environment</code> y creamos una nueva haciendo click en el botón
<code class="language-text">Edit variables</code>. Nos pide Clave / Valor, por practicidad vamos a poner como clave el nombre
que venimos usando <code class="language-text">REACT_APP_API_KEY</code>y como valor ponemos nuestra API key <code class="language-text">0df7569d7af3432a93217005XXXXXXX</code>
todo así sin comillas, solamente el texto.</p><p>Guardamos, es posible que tengamos que repetir el tema del deploy, pero bueno,
no es óptimo pero es la forma que encontré que funciona...</p><p><strong>Listo!</strong> Espero que hayan disfrutado este workshop y cualquier cosa que les
parezca mejorable o que no esté claramente explicada, manden PR para poder hacer
un buen workshop de React desde cero y que más gente pueda aprender.</p><p>Además, si tienen ganas, pongan una foto en Twitter de su app funcionando, para
contagiar a que más personas lo hagan :) y pueden alterar el CSS, lo que
quieran!</p><h2>Cómo seguir desde acá?</h2><p>Ahora la idea es ir mejorando lo que tenemos, les tiro un par de ideas de cosas
que se pueden hacer:</p><ul><li>Mostrar más datos</li><li>Reacomodar cosas en el layout</li><li>Hacer nuestra app responsive</li><li>Agregar un input y buscar el clima en distintas ciudades</li></ul><p>Mil cosas más se pueden hacer, pero esas me parecen copadas. Y si te animás a
agregar el input para buscar en distintas ciudades, me gustaría verlo! 😄😄</p><div style="margin-top:40px;margin-left:-10px;margin-right:-10px" class="Framework__Flex-sc-1kcsy75-6 gxTZxC"><a class="NavButtons__NavButton-ii0ddk-1 spRJx" href="/reactworkshop/paso-02/"><span class="NavButtons__FadedText-ii0ddk-0 iQiGar">ATRÁS</span> <!-- -->Workshop - Paso 2</a></div></div><footer class="Footer-sc-1xqajj9-0 crtzMT">© <!-- -->2019<!-- --> - MIT License</footer></main></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-132529584-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/paso-03/";window.webpackCompilationHash="966be4ed9209c388fe3e";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-c71f336bd488eeb20bee.js"],"component---src-pages-404-js":["/component---src-pages-404-js-01e2a8108b8a9919b15c.js"],"component---src-pages-index-mdx":["/component---src-pages-index-mdx-f292bfac29f064f2349d.js"],"component---src-pages-intro-mdx":["/component---src-pages-intro-mdx-27afec4fefc462bcf7d6.js"],"component---src-pages-paso-01-mdx":["/component---src-pages-paso-01-mdx-3cf4165e588df5f2137d.js"],"component---src-pages-paso-02-mdx":["/component---src-pages-paso-02-mdx-2ac5c1c22552f5378006.js"],"component---src-pages-paso-03-mdx":["/component---src-pages-paso-03-mdx-3937ae9304614ce7b04a.js"],"component---src-pages-props-y-state-mdx":["/component---src-pages-props-y-state-mdx-c6764bd68ea266cb7b47.js"]};/*]]>*/</script><script src="/reactworkshop/webpack-runtime-32f91844be39694fd2dd.js" async=""></script><script src="/reactworkshop/styles-0bd6d4fbf924558e0660.js" async=""></script><script src="/reactworkshop/app-c71f336bd488eeb20bee.js" async=""></script><script src="/reactworkshop/0-394feb47c8c326922c24.js" async=""></script><script src="/reactworkshop/component---src-pages-paso-03-mdx-3937ae9304614ce7b04a.js" async=""></script></body></html>